<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 8 Reglas de Asociación | Ciencia de Datos - UMA</title>
  <meta name="description" content="Material usado como Introducción a Ciencia de Datos - ETSI Informática" />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 8 Reglas de Asociación | Ciencia de Datos - UMA" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Material usado como Introducción a Ciencia de Datos - ETSI Informática" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 8 Reglas de Asociación | Ciencia de Datos - UMA" />
  
  <meta name="twitter:description" content="Material usado como Introducción a Ciencia de Datos - ETSI Informática" />
  

<meta name="author" content="Domingo López, Ángel Mora" />


<meta name="date" content="2022-05-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="clustering.html"/>
<link rel="next" href="formal-concept-analysis.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Ciencia de datos con R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introducción</a></li>
<li class="chapter" data-level="2" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html"><i class="fa fa-check"></i><b>2</b> Análisis Exploratorio de Datos</a>
<ul>
<li class="chapter" data-level="2.1" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html#importación-de-datos"><i class="fa fa-check"></i><b>2.1</b> Importación de datos</a></li>
<li class="chapter" data-level="2.2" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html#dplyr-para-manipulación-de-datos"><i class="fa fa-check"></i><b>2.2</b> <code>dplyr</code> para Manipulación de Datos</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html#backends"><i class="fa fa-check"></i><b>2.2.1</b> Backends</a></li>
<li class="chapter" data-level="2.2.2" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html#filtrado-de-filas-con-filter"><i class="fa fa-check"></i><b>2.2.2</b> Filtrado de filas con <code>filter()</code></a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html#ordenar-filas-con-arrange"><i class="fa fa-check"></i><b>2.3</b> Ordenar filas con <code>arrange()</code></a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html#selección-de-columnas-select"><i class="fa fa-check"></i><b>2.3.1</b> Selección de columnas <code>select()</code></a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html#añadir-o-renombrar-variables-con-mutate"><i class="fa fa-check"></i><b>2.4</b> Añadir o renombrar variables con <code>mutate()</code></a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html#rename"><i class="fa fa-check"></i><b>2.4.1</b> <code>rename()</code></a></li>
<li class="chapter" data-level="2.4.2" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html#uso-del-operador"><i class="fa fa-check"></i><b>2.4.2</b> Uso del operador <code>%&gt;%</code></a></li>
<li class="chapter" data-level="2.4.3" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html#otros-verbos-auxiliares"><i class="fa fa-check"></i><b>2.4.3</b> Otros verbos auxiliares</a></li>
<li class="chapter" data-level="2.4.4" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html#operaciones-con-dos-tablas"><i class="fa fa-check"></i><b>2.4.4</b> Operaciones con dos tablas</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html#proyecto-starwarks"><i class="fa fa-check"></i><b>2.5</b> Proyecto Starwarks</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="algebra-lineal.html"><a href="algebra-lineal.html"><i class="fa fa-check"></i><b>3</b> Algebra Lineal</a>
<ul>
<li class="chapter" data-level="3.1" data-path="algebra-lineal.html"><a href="algebra-lineal.html#grandes-sistemas"><i class="fa fa-check"></i><b>3.1</b> grandes sistemas</a></li>
<li class="chapter" data-level="3.2" data-path="algebra-lineal.html"><a href="algebra-lineal.html#matrices-dispersas"><i class="fa fa-check"></i><b>3.2</b> matrices dispersas</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="test-estadísticos-bayesiano.html"><a href="test-estadísticos-bayesiano.html"><i class="fa fa-check"></i><b>4</b> Test estadísticos bayesiano</a></li>
<li class="chapter" data-level="5" data-path="modelling-techniques.html"><a href="modelling-techniques.html"><i class="fa fa-check"></i><b>5</b> Modelling techniques</a>
<ul>
<li class="chapter" data-level="5.1" data-path="modelling-techniques.html"><a href="modelling-techniques.html#interpolation"><i class="fa fa-check"></i><b>5.1</b> Interpolation</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="modelling-techniques.html"><a href="modelling-techniques.html#polynomial-interpolation"><i class="fa fa-check"></i><b>5.1.1</b> Polynomial interpolation</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="modelling-techniques.html"><a href="modelling-techniques.html#linear-regression"><i class="fa fa-check"></i><b>5.2</b> Linear Regression</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="modelling-techniques.html"><a href="modelling-techniques.html#linear-regression-in-r"><i class="fa fa-check"></i><b>5.2.1</b> Linear Regression in R</a></li>
<li class="chapter" data-level="5.2.2" data-path="modelling-techniques.html"><a href="modelling-techniques.html#lm-function"><i class="fa fa-check"></i><b>5.2.2</b> <strong>lm()</strong> function</a></li>
<li class="chapter" data-level="5.2.3" data-path="modelling-techniques.html"><a href="modelling-techniques.html#evaluate-the-model"><i class="fa fa-check"></i><b>5.2.3</b> Evaluate the model</a></li>
<li class="chapter" data-level="5.2.4" data-path="modelling-techniques.html"><a href="modelling-techniques.html#accuracy-of-the-model"><i class="fa fa-check"></i><b>5.2.4</b> Accuracy of the model</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="modelling-techniques.html"><a href="modelling-techniques.html#generalized-regression"><i class="fa fa-check"></i><b>5.3</b> Generalized Regression</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="modelling-techniques.html"><a href="modelling-techniques.html#multiple-linear-regression"><i class="fa fa-check"></i><b>5.3.1</b> Multiple Linear Regression</a></li>
<li class="chapter" data-level="5.3.2" data-path="modelling-techniques.html"><a href="modelling-techniques.html#evaluating-the-regression-coefficients"><i class="fa fa-check"></i><b>5.3.2</b> Evaluating the Regression Coefficients</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="modelling-techniques.html"><a href="modelling-techniques.html#improving-the-models"><i class="fa fa-check"></i><b>5.4</b> Improving the models</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="modelling-techniques.html"><a href="modelling-techniques.html#updating-the-models"><i class="fa fa-check"></i><b>5.4.1</b> Updating the models</a></li>
<li class="chapter" data-level="5.4.2" data-path="modelling-techniques.html"><a href="modelling-techniques.html#searching-the-best-regression"><i class="fa fa-check"></i><b>5.4.2</b> Searching the best regression</a></li>
<li class="chapter" data-level="5.4.3" data-path="modelling-techniques.html"><a href="modelling-techniques.html#orthogonal-polynomials"><i class="fa fa-check"></i><b>5.4.3</b> Orthogonal polynomials</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="modelling-techniques.html"><a href="modelling-techniques.html#model-validation"><i class="fa fa-check"></i><b>5.5</b> Model validation</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="modelling-techniques.html"><a href="modelling-techniques.html#residuals"><i class="fa fa-check"></i><b>5.5.1</b> Residuals</a></li>
<li class="chapter" data-level="5.5.2" data-path="modelling-techniques.html"><a href="modelling-techniques.html#other-study-of-residuals"><i class="fa fa-check"></i><b>5.5.2</b> Other study of residuals</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="modelling-techniques.html"><a href="modelling-techniques.html#proyecto---regresion-economistdata"><i class="fa fa-check"></i><b>5.6</b> Proyecto - regresion EconomistData</a></li>
<li class="chapter" data-level="5.7" data-path="modelling-techniques.html"><a href="modelling-techniques.html#proyecto---analysing-boston-dataset"><i class="fa fa-check"></i><b>5.7</b> Proyecto - Analysing <em>Boston</em> dataset</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="modelling-techniques.html"><a href="modelling-techniques.html#fit-a-simple-linear-regression"><i class="fa fa-check"></i><b>5.7.1</b> Fit a simple linear regression</a></li>
<li class="chapter" data-level="5.7.2" data-path="modelling-techniques.html"><a href="modelling-techniques.html#analyzing-the-model"><i class="fa fa-check"></i><b>5.7.2</b> Analyzing the model</a></li>
<li class="chapter" data-level="5.7.3" data-path="modelling-techniques.html"><a href="modelling-techniques.html#multiple-regression"><i class="fa fa-check"></i><b>5.7.3</b> Multiple regression</a></li>
<li class="chapter" data-level="5.7.4" data-path="modelling-techniques.html"><a href="modelling-techniques.html#interaction-terms"><i class="fa fa-check"></i><b>5.7.4</b> Interaction terms</a></li>
<li class="chapter" data-level="5.7.5" data-path="modelling-techniques.html"><a href="modelling-techniques.html#non-linear-transformations-of-the-predictors"><i class="fa fa-check"></i><b>5.7.5</b> Non-linear transformations of the predictors</a></li>
<li class="chapter" data-level="5.7.6" data-path="modelling-techniques.html"><a href="modelling-techniques.html#using-anova"><i class="fa fa-check"></i><b>5.7.6</b> Using anova</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="modelling-techniques.html"><a href="modelling-techniques.html#poyecto---evaluación-de-cursos---variables-categóricas"><i class="fa fa-check"></i><b>5.8</b> Poyecto - evaluación de cursos - variables categóricas</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="modelling-techniques.html"><a href="modelling-techniques.html#eda---exploratory-data-analysis"><i class="fa fa-check"></i><b>5.8.1</b> EDA - exploratory data analysis</a></li>
<li class="chapter" data-level="5.8.2" data-path="modelling-techniques.html"><a href="modelling-techniques.html#modelo-lineal"><i class="fa fa-check"></i><b>5.8.2</b> Modelo lineal</a></li>
<li class="chapter" data-level="5.8.3" data-path="modelling-techniques.html"><a href="modelling-techniques.html#interacción-de-modelos"><i class="fa fa-check"></i><b>5.8.3</b> Interacción de modelos</a></li>
<li class="chapter" data-level="5.8.4" data-path="modelling-techniques.html"><a href="modelling-techniques.html#multiple-regression-1"><i class="fa fa-check"></i><b>5.8.4</b> Multiple Regression</a></li>
<li class="chapter" data-level="5.8.5" data-path="modelling-techniques.html"><a href="modelling-techniques.html#validando-el-modelo"><i class="fa fa-check"></i><b>5.8.5</b> Validando el modelo</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="modelling-techniques.html"><a href="modelling-techniques.html#anexo-r-avanzado"><i class="fa fa-check"></i><b>5.9</b> Anexo: R avanzado</a>
<ul>
<li class="chapter" data-level="5.9.1" data-path="modelling-techniques.html"><a href="modelling-techniques.html#más-de-tidyverse"><i class="fa fa-check"></i><b>5.9.1</b> Más de tidyverse</a></li>
<li class="chapter" data-level="5.9.2" data-path="modelling-techniques.html"><a href="modelling-techniques.html#skimr-package"><i class="fa fa-check"></i><b>5.9.2</b> <code>Skimr</code> package</a></li>
</ul></li>
<li class="chapter" data-level="5.10" data-path="modelling-techniques.html"><a href="modelling-techniques.html#proyecto---predicción-de-riesgos"><i class="fa fa-check"></i><b>5.10</b> Proyecto - Predicción de riesgos</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="series-temporales.html"><a href="series-temporales.html"><i class="fa fa-check"></i><b>6</b> Series Temporales</a></li>
<li class="chapter" data-level="7" data-path="clustering.html"><a href="clustering.html"><i class="fa fa-check"></i><b>7</b> Clustering</a>
<ul>
<li class="chapter" data-level="7.1" data-path="clustering.html"><a href="clustering.html#fundamentos"><i class="fa fa-check"></i><b>7.1</b> Fundamentos</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="clustering.html"><a href="clustering.html#medidas-de-similaridad"><i class="fa fa-check"></i><b>7.1.1</b> Medidas de similaridad</a></li>
<li class="chapter" data-level="7.1.2" data-path="clustering.html"><a href="clustering.html#disimilaridad-basada-en-diferencias"><i class="fa fa-check"></i><b>7.1.2</b> Disimilaridad basada en diferencias</a></li>
<li class="chapter" data-level="7.1.3" data-path="clustering.html"><a href="clustering.html#matriz-de-distancias"><i class="fa fa-check"></i><b>7.1.3</b> Matriz de distancias</a></li>
<li class="chapter" data-level="7.1.4" data-path="clustering.html"><a href="clustering.html#similaridad-basada-en-correlaciones"><i class="fa fa-check"></i><b>7.1.4</b> Similaridad basada en correlaciones</a></li>
<li class="chapter" data-level="7.1.5" data-path="clustering.html"><a href="clustering.html#correlación-de-pearson"><i class="fa fa-check"></i><b>7.1.5</b> Correlación de Pearson</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="clustering.html"><a href="clustering.html#clustering-en-r"><i class="fa fa-check"></i><b>7.2</b> Clustering en R</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="clustering.html"><a href="clustering.html#centros"><i class="fa fa-check"></i><b>7.2.1</b> Centros</a></li>
<li class="chapter" data-level="7.2.2" data-path="clustering.html"><a href="clustering.html#objetivo"><i class="fa fa-check"></i><b>7.2.2</b> Objetivo</a></li>
<li class="chapter" data-level="7.2.3" data-path="clustering.html"><a href="clustering.html#k-means"><i class="fa fa-check"></i><b>7.2.3</b> k-means</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="clustering.html"><a href="clustering.html#número-optimo-de-clusters"><i class="fa fa-check"></i><b>7.3</b> Número optimo de clusters</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="clustering.html"><a href="clustering.html#proyecto---dataset-usarrests"><i class="fa fa-check"></i><b>7.3.1</b> Proyecto - dataset USArrests</a></li>
<li class="chapter" data-level="7.3.2" data-path="clustering.html"><a href="clustering.html#tamaño-optimal-de-clusters"><i class="fa fa-check"></i><b>7.3.2</b> Tamaño optimal de clusters</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="clustering.html"><a href="clustering.html#clustering-jerárquico"><i class="fa fa-check"></i><b>7.4</b> Clustering jerárquico</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="clustering.html"><a href="clustering.html#proyecto-dataset-protein"><i class="fa fa-check"></i><b>7.4.1</b> Proyecto dataset protein</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="reglas-de-asociación.html"><a href="reglas-de-asociación.html"><i class="fa fa-check"></i><b>8</b> Reglas de Asociación</a>
<ul>
<li class="chapter" data-level="8.1" data-path="reglas-de-asociación.html"><a href="reglas-de-asociación.html#introducción-1"><i class="fa fa-check"></i><b>8.1</b> Introducción</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="reglas-de-asociación.html"><a href="reglas-de-asociación.html#detectando-y-prediciendo-tendencias"><i class="fa fa-check"></i><b>8.1.1</b> Detectando y prediciendo tendencias</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="reglas-de-asociación.html"><a href="reglas-de-asociación.html#reglas-de-asociación-de-transacciones"><i class="fa fa-check"></i><b>8.2</b> Reglas de Asociación de transacciones</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="reglas-de-asociación.html"><a href="reglas-de-asociación.html#parámetros-de-apriori"><i class="fa fa-check"></i><b>8.2.1</b> Parámetros de <strong>apriori</strong></a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="reglas-de-asociación.html"><a href="reglas-de-asociación.html#reglas-de-asociación---preprocesamiento"><i class="fa fa-check"></i><b>8.3</b> Reglas de Asociación - preprocesamiento</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="reglas-de-asociación.html"><a href="reglas-de-asociación.html#discretización-de-items"><i class="fa fa-check"></i><b>8.3.1</b> Discretización de items</a></li>
<li class="chapter" data-level="8.3.2" data-path="reglas-de-asociación.html"><a href="reglas-de-asociación.html#tipo-de-dato-transactions"><i class="fa fa-check"></i><b>8.3.2</b> Tipo de dato <em>transactions</em></a></li>
<li class="chapter" data-level="8.3.3" data-path="reglas-de-asociación.html"><a href="reglas-de-asociación.html#métodos-de-arules"><i class="fa fa-check"></i><b>8.3.3</b> Métodos de arules</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="reglas-de-asociación.html"><a href="reglas-de-asociación.html#ejercicio-en-laboratorio"><i class="fa fa-check"></i><b>8.4</b> Ejercicio en Laboratorio</a></li>
<li class="chapter" data-level="8.5" data-path="reglas-de-asociación.html"><a href="reglas-de-asociación.html#arulesviz"><i class="fa fa-check"></i><b>8.5</b> arulesViz</a></li>
<li class="chapter" data-level="8.6" data-path="reglas-de-asociación.html"><a href="reglas-de-asociación.html#construyendo-un-sistema-recomendador"><i class="fa fa-check"></i><b>8.6</b> Construyendo un sistema recomendador</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="formal-concept-analysis.html"><a href="formal-concept-analysis.html"><i class="fa fa-check"></i><b>9</b> Formal Concept Analysis</a>
<ul>
<li class="chapter" data-level="9.1" data-path="formal-concept-analysis.html"><a href="formal-concept-analysis.html#background-in-fca"><i class="fa fa-check"></i><b>9.1</b> Background in FCA</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="formal-concept-analysis.html"><a href="formal-concept-analysis.html#datasets"><i class="fa fa-check"></i><b>9.1.1</b> Datasets</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="formal-concept-analysis.html"><a href="formal-concept-analysis.html#working-with-formal-contexts---datasets"><i class="fa fa-check"></i><b>9.2</b> Working with Formal Contexts - datasets</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="formal-concept-analysis.html"><a href="formal-concept-analysis.html#plotting-printing-and-latex-ing-the-formalcontext"><i class="fa fa-check"></i><b>9.2.1</b> Plotting, printing and latex-ing the FormalContext</a></li>
<li class="chapter" data-level="9.2.2" data-path="formal-concept-analysis.html"><a href="formal-concept-analysis.html#closures"><i class="fa fa-check"></i><b>9.2.2</b> Closures</a></li>
<li class="chapter" data-level="9.2.3" data-path="formal-concept-analysis.html"><a href="formal-concept-analysis.html#clarification-and-reduction"><i class="fa fa-check"></i><b>9.2.3</b> Clarification and Reduction</a></li>
<li class="chapter" data-level="9.2.4" data-path="formal-concept-analysis.html"><a href="formal-concept-analysis.html#extracting-implications-and-concepts"><i class="fa fa-check"></i><b>9.2.4</b> Extracting Implications and Concepts</a></li>
<li class="chapter" data-level="9.2.5" data-path="formal-concept-analysis.html"><a href="formal-concept-analysis.html#saving-and-loading"><i class="fa fa-check"></i><b>9.2.5</b> Saving and loading</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="formal-concept-analysis.html"><a href="formal-concept-analysis.html#concept-lattice"><i class="fa fa-check"></i><b>9.3</b> Concept Lattice</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="formal-concept-analysis.html"><a href="formal-concept-analysis.html#plot-print-and-latex"><i class="fa fa-check"></i><b>9.3.1</b> Plot, print and LaTeX</a></li>
<li class="chapter" data-level="9.3.2" data-path="formal-concept-analysis.html"><a href="formal-concept-analysis.html#getting-all-extents-intents-and-retrieving-concepts"><i class="fa fa-check"></i><b>9.3.2</b> Getting all extents, intents and retrieving concepts</a></li>
<li class="chapter" data-level="9.3.3" data-path="formal-concept-analysis.html"><a href="formal-concept-analysis.html#concept-support"><i class="fa fa-check"></i><b>9.3.3</b> Concept support</a></li>
<li class="chapter" data-level="9.3.4" data-path="formal-concept-analysis.html"><a href="formal-concept-analysis.html#sublattices"><i class="fa fa-check"></i><b>9.3.4</b> Sublattices</a></li>
<li class="chapter" data-level="9.3.5" data-path="formal-concept-analysis.html"><a href="formal-concept-analysis.html#subconcepts-superconcepts-infimum-and-supremum"><i class="fa fa-check"></i><b>9.3.5</b> Subconcepts, superconcepts, infimum and supremum</a></li>
<li class="chapter" data-level="9.3.6" data-path="formal-concept-analysis.html"><a href="formal-concept-analysis.html#join--and-meet--irreducible-elements"><i class="fa fa-check"></i><b>9.3.6</b> Join- and meet- irreducible elements</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="formal-concept-analysis.html"><a href="formal-concept-analysis.html#exercises"><i class="fa fa-check"></i><b>9.4</b> Exercises</a></li>
<li class="chapter" data-level="9.5" data-path="formal-concept-analysis.html"><a href="formal-concept-analysis.html#implications-in-fca"><i class="fa fa-check"></i><b>9.5</b> Implications in FCA</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="formal-concept-analysis.html"><a href="formal-concept-analysis.html#crisp-version"><i class="fa fa-check"></i><b>9.5.1</b> Crisp Version</a></li>
<li class="chapter" data-level="9.5.2" data-path="formal-concept-analysis.html"><a href="formal-concept-analysis.html#computing-implications-and-concepts"><i class="fa fa-check"></i><b>9.5.2</b> Computing Implications and Concepts</a></li>
<li class="chapter" data-level="9.5.3" data-path="formal-concept-analysis.html"><a href="formal-concept-analysis.html#redudancy-removal"><i class="fa fa-check"></i><b>9.5.3</b> Redudancy Removal</a></li>
<li class="chapter" data-level="9.5.4" data-path="formal-concept-analysis.html"><a href="formal-concept-analysis.html#fuzzy-version"><i class="fa fa-check"></i><b>9.5.4</b> Fuzzy version</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="formal-concept-analysis.html"><a href="formal-concept-analysis.html#exercise"><i class="fa fa-check"></i><b>9.6</b> Exercise</a></li>
<li class="chapter" data-level="9.7" data-path="formal-concept-analysis.html"><a href="formal-concept-analysis.html#simplification-logic-for-mushroom-dataset"><i class="fa fa-check"></i><b>9.7</b> Simplification Logic for Mushroom Dataset”</a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="formal-concept-analysis.html"><a href="formal-concept-analysis.html#data-1"><i class="fa fa-check"></i><b>9.7.1</b> Data</a></li>
<li class="chapter" data-level="9.7.2" data-path="formal-concept-analysis.html"><a href="formal-concept-analysis.html#preprocessing"><i class="fa fa-check"></i><b>9.7.2</b> Preprocessing</a></li>
<li class="chapter" data-level="9.7.3" data-path="formal-concept-analysis.html"><a href="formal-concept-analysis.html#importing-in-fcar"><i class="fa fa-check"></i><b>9.7.3</b> Importing in fcaR</a></li>
<li class="chapter" data-level="9.7.4" data-path="formal-concept-analysis.html"><a href="formal-concept-analysis.html#applying-rules"><i class="fa fa-check"></i><b>9.7.4</b> Applying Rules</a></li>
<li class="chapter" data-level="9.7.5" data-path="formal-concept-analysis.html"><a href="formal-concept-analysis.html#computing-closure"><i class="fa fa-check"></i><b>9.7.5</b> Computing Closure</a></li>
<li class="chapter" data-level="9.7.6" data-path="formal-concept-analysis.html"><a href="formal-concept-analysis.html#re-exporting-to-arules"><i class="fa fa-check"></i><b>9.7.6</b> Re-Exporting to <code>arules</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="social-network-analysis.html"><a href="social-network-analysis.html"><i class="fa fa-check"></i><b>10</b> Social Network Analysis</a>
<ul>
<li class="chapter" data-level="10.1" data-path="social-network-analysis.html"><a href="social-network-analysis.html#r-for-sna"><i class="fa fa-check"></i><b>10.1</b> R for SNA</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="social-network-analysis.html"><a href="social-network-analysis.html#elementos-de-una-red"><i class="fa fa-check"></i><b>10.1.1</b> Elementos de una red</a></li>
<li class="chapter" data-level="10.1.2" data-path="social-network-analysis.html"><a href="social-network-analysis.html#representación-de-redes"><i class="fa fa-check"></i><b>10.1.2</b> Representación de redes</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="social-network-analysis.html"><a href="social-network-analysis.html#igraph"><i class="fa fa-check"></i><b>10.2</b> <code>igraph</code></a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="social-network-analysis.html"><a href="social-network-analysis.html#acceder-a-elementos-de-grado"><i class="fa fa-check"></i><b>10.2.1</b> Acceder a elementos de grado</a></li>
<li class="chapter" data-level="10.2.2" data-path="social-network-analysis.html"><a href="social-network-analysis.html#construirmodificar-un-grafo"><i class="fa fa-check"></i><b>10.2.2</b> Construir/Modificar un grafo</a></li>
<li class="chapter" data-level="10.2.3" data-path="social-network-analysis.html"><a href="social-network-analysis.html#visualización-1"><i class="fa fa-check"></i><b>10.2.3</b> Visualización</a></li>
<li class="chapter" data-level="10.2.4" data-path="social-network-analysis.html"><a href="social-network-analysis.html#layout"><i class="fa fa-check"></i><b>10.2.4</b> Layout</a></li>
<li class="chapter" data-level="10.2.5" data-path="social-network-analysis.html"><a href="social-network-analysis.html#dibujar-grafos-ponderados"><i class="fa fa-check"></i><b>10.2.5</b> Dibujar grafos ponderados</a></li>
<li class="chapter" data-level="10.2.6" data-path="social-network-analysis.html"><a href="social-network-analysis.html#cambiar-aspecto-y-propiedades-de-un-grafo"><i class="fa fa-check"></i><b>10.2.6</b> Cambiar aspecto y propiedades de un grafo</a></li>
<li class="chapter" data-level="10.2.7" data-path="social-network-analysis.html"><a href="social-network-analysis.html#ejemplos---plantillas"><i class="fa fa-check"></i><b>10.2.7</b> Ejemplos - plantillas</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="social-network-analysis.html"><a href="social-network-analysis.html#exportar-grafos"><i class="fa fa-check"></i><b>10.3</b> Exportar grafos</a></li>
<li class="chapter" data-level="10.4" data-path="social-network-analysis.html"><a href="social-network-analysis.html#de-twitter"><i class="fa fa-check"></i><b>10.4</b> De Twitter</a></li>
<li class="chapter" data-level="10.5" data-path="social-network-analysis.html"><a href="social-network-analysis.html#medidas-de-bondad-calidad"><i class="fa fa-check"></i><b>10.5</b> Medidas de bondad, calidad</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="social-network-analysis.html"><a href="social-network-analysis.html#centrality"><i class="fa fa-check"></i><b>10.5.1</b> Centrality</a></li>
<li class="chapter" data-level="10.5.2" data-path="social-network-analysis.html"><a href="social-network-analysis.html#degree"><i class="fa fa-check"></i><b>10.5.2</b> Degree</a></li>
<li class="chapter" data-level="10.5.3" data-path="social-network-analysis.html"><a href="social-network-analysis.html#betweenness"><i class="fa fa-check"></i><b>10.5.3</b> Betweenness</a></li>
<li class="chapter" data-level="10.5.4" data-path="social-network-analysis.html"><a href="social-network-analysis.html#edge_betweenness"><i class="fa fa-check"></i><b>10.5.4</b> Edge_betweenness</a></li>
<li class="chapter" data-level="10.5.5" data-path="social-network-analysis.html"><a href="social-network-analysis.html#closeness"><i class="fa fa-check"></i><b>10.5.5</b> Closeness</a></li>
<li class="chapter" data-level="10.5.6" data-path="social-network-analysis.html"><a href="social-network-analysis.html#eigenvector"><i class="fa fa-check"></i><b>10.5.6</b> Eigenvector</a></li>
<li class="chapter" data-level="10.5.7" data-path="social-network-analysis.html"><a href="social-network-analysis.html#pagerank"><i class="fa fa-check"></i><b>10.5.7</b> Pagerank</a></li>
<li class="chapter" data-level="10.5.8" data-path="social-network-analysis.html"><a href="social-network-analysis.html#diameter"><i class="fa fa-check"></i><b>10.5.8</b> Diameter</a></li>
<li class="chapter" data-level="10.5.9" data-path="social-network-analysis.html"><a href="social-network-analysis.html#caminos-y-distancias"><i class="fa fa-check"></i><b>10.5.9</b> Caminos y distancias</a></li>
<li class="chapter" data-level="10.5.10" data-path="social-network-analysis.html"><a href="social-network-analysis.html#transitivity"><i class="fa fa-check"></i><b>10.5.10</b> Transitivity</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="social-network-analysis.html"><a href="social-network-analysis.html#proyecto-sna---usairports"><i class="fa fa-check"></i><b>10.6</b> Proyecto SNA - USairports</a></li>
<li class="chapter" data-level="10.7" data-path="social-network-analysis.html"><a href="social-network-analysis.html#proyecto---películas-actores"><i class="fa fa-check"></i><b>10.7</b> Proyecto - películas + actores</a>
<ul>
<li class="chapter" data-level="10.7.1" data-path="social-network-analysis.html"><a href="social-network-analysis.html#crear-grafo"><i class="fa fa-check"></i><b>10.7.1</b> crear grafo</a></li>
<li class="chapter" data-level="10.7.2" data-path="social-network-analysis.html"><a href="social-network-analysis.html#análisis-del-grafo"><i class="fa fa-check"></i><b>10.7.2</b> Análisis del grafo</a></li>
<li class="chapter" data-level="10.7.3" data-path="social-network-analysis.html"><a href="social-network-analysis.html#cambiar-atributos-del-grafo"><i class="fa fa-check"></i><b>10.7.3</b> Cambiar atributos del grafo</a></li>
<li class="chapter" data-level="10.7.4" data-path="social-network-analysis.html"><a href="social-network-analysis.html#modificar-el-grafo"><i class="fa fa-check"></i><b>10.7.4</b> Modificar el grafo</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="pagerank-1.html"><a href="pagerank-1.html"><i class="fa fa-check"></i><b>11</b> pagerank</a></li>
<li class="chapter" data-level="12" data-path="análisis-de-componentes-principales.html"><a href="análisis-de-componentes-principales.html"><i class="fa fa-check"></i><b>12</b> Análisis de Componentes Principales</a></li>
<li class="chapter" data-level="13" data-path="text-imining.html"><a href="text-imining.html"><i class="fa fa-check"></i><b>13</b> Text Imining</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Ciencia de Datos - UMA</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="reglas-de-asociación" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number">Capítulo 8</span> Reglas de Asociación<a href="reglas-de-asociación.html#reglas-de-asociación" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="introducción-1" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> Introducción<a href="reglas-de-asociación.html#introducción-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Aprendizaje no supervisado: técnica que permite un aprendizaje a partir de observaciones que permite extraer patrones, tendencias y realizar predicciones - <strong>sin entrenamiento</strong>.</li>
<li>Entre los problemas más relevantes - <strong>predición de comportamiento de clientes, tendencias de compras</strong>: tiendas online, servicios online que ofrecen música, películas, etc.</li>
<li>La realidad actual es que hay mucha competencia, muchos servicios similares, mercados online, etc.</li>
<li>Objetivo: <strong>Atraer clientes es la clave</strong>.</li>
<li>Medios: datos recolectados de los consumidores, de los usuarios de los servicios, características de los consumidores extraidas de los datos recolectados, patrones previos de compra o de uso, etc.</li>
<li>Herramientas: Métodos de Ciencia de Datos - <strong>búsqueda de patrones frecuentes, reglas, etc.</strong></li>
</ul>
<p>Los métodos usados en esta área deben analizr los datos almacenados para diseñar sistemas recomendadores con los que:</p>
<ul>
<li>Ayudar a personalizar los servicios y la experiencia de compra, adivinar y sugerir tendencias de compra a partir de <em>likes, dislikes</em>.</li>
<li>Controlar las horas punta de los servicios.</li>
<li>Analizar combinaciones de productos que la gente suele comprar juntas.</li>
<li>Analizar revisiones y precios que la competencia ofrece por los mismos productos</li>
</ul>
<p>Los problemas en este área surgen del llamado <strong>Market Basket Analysis</strong> que se enfrenta a cómo realizar recomendaciones basadas en productos. Las soluciones para este problema pueden usarse en otros problemas similares: recomendaciones de intereses de las personas, etc.</p>
<p>Las técnicas más importantes son:</p>
<ul>
<li>Evaluación de la matriz de contingenica de los productos.</li>
<li>Generación de itemsets frecuentes.</li>
<li>Extracción de reglas de asociación.</li>
</ul>
<div id="detectando-y-prediciendo-tendencias" class="section level3 hasAnchor" number="8.1.1">
<h3><span class="header-section-number">8.1.1</span> Detectando y prediciendo tendencias<a href="reglas-de-asociación.html#detectando-y-prediciendo-tendencias" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Tendencia: patrón específico o comportamiento de compra-venta que aparece en un periodo de tiempo en una tienda.</li>
<li>¿Cómo detectar?: Almacenar todas las transacciones que se realicen en la tienda.
<ul>
<li>items comprados</li>
<li>stocks</li>
<li>combinaciones de items comprados juntos</li>
<li>transacción de cada venta realizada</li>
</ul></li>
<li>¿Cómo tratar los datos?:
<ul>
<li>pre-procesar</li>
<li>normalizar</li>
<li>agregar</li>
</ul></li>
<li>Aplicar algoritmos: localizar patrones y tendencias</li>
<li>Recomendar: usar patrones y tendencias para sugerir nuevas compras.</li>
</ul>
<p>El principal método para conseguir todo esto está basado en el problema denominado <strong>Market Basket Analysis</strong>. Estos métodos están fundamentados en estadística basado en probabilidad y nociones probabilísticas como:
* soporte
* confianza
* lift, etc.</p>
<p>Objetivo: <strong>¿Qué items (productos) se han comprado más frecuentemente?</strong></p>
</div>
</div>
<div id="reglas-de-asociación-de-transacciones" class="section level2 hasAnchor" number="8.2">
<h2><span class="header-section-number">8.2</span> Reglas de Asociación de transacciones<a href="reglas-de-asociación.html#reglas-de-asociación-de-transacciones" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<blockquote>
<blockquote>
<p>Explorando el dataset <strong>Adult</strong></p>
</blockquote>
</blockquote>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="reglas-de-asociación.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(arules)</span></span>
<span id="cb5-2"><a href="reglas-de-asociación.html#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(arules)</span>
<span id="cb5-3"><a href="reglas-de-asociación.html#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;Adult&quot;</span>)</span>
<span id="cb5-4"><a href="reglas-de-asociación.html#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(Adult)</span></code></pre></div>
<p>[1] 48842</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="reglas-de-asociación.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(Adult)</span></code></pre></div>
<p>[1] 48842 115</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="reglas-de-asociación.html#cb7-1" aria-hidden="true" tabindex="-1"></a>Adult</span></code></pre></div>
<p>transactions in sparse format with
48842 transactions (rows) and
115 items (columns)</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="reglas-de-asociación.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(Adult[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>])</span></code></pre></div>
<pre><code>items                                transactionID</code></pre>
<p>[1] {age=Middle-aged,<br />
workclass=State-gov,<br />
education=Bachelors,<br />
marital-status=Never-married,<br />
occupation=Adm-clerical,<br />
relationship=Not-in-family,<br />
race=White,<br />
sex=Male,<br />
capital-gain=Low,<br />
capital-loss=None,<br />
hours-per-week=Full-time,<br />
native-country=United-States,<br />
income=small} 1
[2] {age=Senior,<br />
workclass=Self-emp-not-inc,<br />
education=Bachelors,<br />
marital-status=Married-civ-spouse,<br />
occupation=Exec-managerial,<br />
relationship=Husband,<br />
race=White,<br />
sex=Male,<br />
capital-gain=None,<br />
capital-loss=None,<br />
hours-per-week=Part-time,<br />
native-country=United-States,<br />
income=small} 2</p>
<p>Para calcular las reglas de asociación:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="reglas-de-asociación.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;Adult&quot;</span>)</span>
<span id="cb10-2"><a href="reglas-de-asociación.html#cb10-2" aria-hidden="true" tabindex="-1"></a> rules <span class="ot">&lt;-</span> <span class="fu">apriori</span>(Adult,  <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">supp =</span> <span class="fl">0.5</span>, <span class="at">conf =</span> <span class="fl">0.9</span>,   </span>
<span id="cb10-3"><a href="reglas-de-asociación.html#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="at">target =</span> <span class="st">&quot;rules&quot;</span>)) </span></code></pre></div>
<p>Apriori</p>
<p>Parameter specification:
confidence minval smax arem aval originalSupport maxtime support minlen
0.9 0.1 1 none FALSE TRUE 5 0.5 1
maxlen target ext
10 rules TRUE</p>
<p>Algorithmic control:
filter tree heap memopt load sort verbose
0.1 TRUE TRUE FALSE TRUE 2 TRUE</p>
<p>Absolute minimum support count: 24421</p>
<p>set item appearances …[0 item(s)] done [0.00s].
set transactions …[115 item(s), 48842 transaction(s)] done [0.03s].
sorting and recoding items … [9 item(s)] done [0.00s].
creating transaction tree … done [0.01s].
checking subsets of size 1 2 3 4 done [0.00s].
writing … [52 rule(s)] done [0.00s].
creating S4 object … done [0.00s].</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="reglas-de-asociación.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(rules) </span></code></pre></div>
<p>set of 52 rules</p>
<p>rule length distribution (lhs + rhs):sizes
1 2 3 4
2 13 24 13</p>
<p>Min. 1st Qu. Median Mean 3rd Qu. Max.
1.000 2.000 3.000 2.923 3.250 4.000</p>
<p>summary of quality measures:
support confidence coverage lift<br />
Min. :0.5084 Min. :0.9031 Min. :0.5406 Min. :0.9844<br />
1st Qu.:0.5415 1st Qu.:0.9155 1st Qu.:0.5875 1st Qu.:0.9937<br />
Median :0.5974 Median :0.9229 Median :0.6293 Median :0.9997<br />
Mean :0.6436 Mean :0.9308 Mean :0.6915 Mean :1.0036<br />
3rd Qu.:0.7426 3rd Qu.:0.9494 3rd Qu.:0.7945 3rd Qu.:1.0057<br />
Max. :0.9533 Max. :0.9583 Max. :1.0000 Max. :1.0586<br />
count<br />
Min. :24832<br />
1st Qu.:26447<br />
Median :29178<br />
Mean :31433<br />
3rd Qu.:36269<br />
Max. :46560</p>
<p>mining info:
data ntransactions support confidence
Adult 48842 0.5 0.9
call
apriori(data = Adult, parameter = list(supp = 0.5, conf = 0.9, target = “rules”))</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="reglas-de-asociación.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">head</span>(rules))</span></code></pre></div>
<pre><code>lhs                           rhs                 support   confidence</code></pre>
<p>[1] {} =&gt; {capital-gain=None} 0.9173867 0.9173867
[2] {} =&gt; {capital-loss=None} 0.9532779 0.9532779
[3] {hours-per-week=Full-time} =&gt; {capital-gain=None} 0.5435895 0.9290688
[4] {hours-per-week=Full-time} =&gt; {capital-loss=None} 0.5606650 0.9582531
[5] {sex=Male} =&gt; {capital-gain=None} 0.6050735 0.9051455
[6] {sex=Male} =&gt; {capital-loss=None} 0.6331027 0.9470750
coverage lift count
[1] 1.0000000 1.0000000 44807
[2] 1.0000000 1.0000000 46560
[3] 0.5850907 1.0127342 26550
[4] 0.5850907 1.0052191 27384
[5] 0.6684820 0.9866565 29553
[6] 0.6684820 0.9934931 30922</p>
<div id="parámetros-de-apriori" class="section level3 hasAnchor" number="8.2.1">
<h3><span class="header-section-number">8.2.1</span> Parámetros de <strong>apriori</strong><a href="reglas-de-asociación.html#parámetros-de-apriori" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<blockquote>
<p>parameter: lista con las restricciones en el proceso de extracción</p>
</blockquote>
<ul>
<li><em>supp</em> o <em>support</em></li>
<li><em>conf</em> o <em>confidence</em></li>
<li><em>minlen</em> - máximo número de items en itemset</li>
<li><em>maxlen</em> - máximo número de items en itemset</li>
<li><em>maxtime</em> - límite de tiempo</li>
<li><em>target</em> - indicar qué tipo de asociaciones queremos extraer: “rules”, “frequent itemsets”, “maximally frequent itemsets”, “closed frequent itemsets”.</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="reglas-de-asociación.html#cb14-1" aria-hidden="true" tabindex="-1"></a>rules <span class="ot">&lt;-</span> <span class="fu">apriori</span>(Adult,  <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">supp =</span> <span class="fl">0.5</span>, <span class="at">conf =</span> <span class="fl">0.9</span>,<span class="at">minlen=</span><span class="dv">2</span>)) </span></code></pre></div>
<p>Apriori</p>
<p>Parameter specification:
confidence minval smax arem aval originalSupport maxtime support minlen
0.9 0.1 1 none FALSE TRUE 5 0.5 2
maxlen target ext
10 rules TRUE</p>
<p>Algorithmic control:
filter tree heap memopt load sort verbose
0.1 TRUE TRUE FALSE TRUE 2 TRUE</p>
<p>Absolute minimum support count: 24421</p>
<p>set item appearances …[0 item(s)] done [0.00s].
set transactions …[115 item(s), 48842 transaction(s)] done [0.03s].
sorting and recoding items … [9 item(s)] done [0.00s].
creating transaction tree … done [0.01s].
checking subsets of size 1 2 3 4 done [0.00s].
writing … [50 rule(s)] done [0.00s].
creating S4 object … done [0.00s].</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="reglas-de-asociación.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">tail</span>(rules))</span></code></pre></div>
<pre><code>lhs                               rhs                              support confidence  coverage      lift count</code></pre>
<p>[1] {workclass=Private,<br />
race=White,<br />
capital-loss=None} =&gt; {capital-gain=None} 0.5204742 0.9171628 0.5674829 0.9997559 25421
[2] {workclass=Private,<br />
capital-gain=None,<br />
native-country=United-States} =&gt; {capital-loss=None} 0.5414807 0.9517075 0.5689570 0.9983526 26447
[3] {workclass=Private,<br />
capital-loss=None,<br />
native-country=United-States} =&gt; {capital-gain=None} 0.5414807 0.9182030 0.5897179 1.0008898 26447
[4] {race=White,<br />
capital-gain=None,<br />
native-country=United-States} =&gt; {capital-loss=None} 0.6803980 0.9457029 0.7194628 0.9920537 33232
[5] {race=White,<br />
capital-loss=None,<br />
native-country=United-States} =&gt; {capital-gain=None} 0.6803980 0.9083504 0.7490480 0.9901500 33232
[6] {race=White,<br />
capital-gain=None,<br />
capital-loss=None} =&gt; {native-country=United-States} 0.6803980 0.9189249 0.7404283 1.0239581 33232</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="reglas-de-asociación.html#cb17-1" aria-hidden="true" tabindex="-1"></a>patterns <span class="ot">&lt;-</span> <span class="fu">apriori</span>(Adult,  <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">supp =</span> <span class="fl">0.5</span>, <span class="at">conf =</span> <span class="fl">0.9</span>,<span class="at">maxlen=</span><span class="dv">10</span>, <span class="at">target=</span><span class="st">&quot;frequent itemsets&quot;</span>)) </span></code></pre></div>
<p>Apriori</p>
<p>Parameter specification:
confidence minval smax arem aval originalSupport maxtime support minlen
NA 0.1 1 none FALSE TRUE 5 0.5 1
maxlen target ext
10 frequent itemsets TRUE</p>
<p>Algorithmic control:
filter tree heap memopt load sort verbose
0.1 TRUE TRUE FALSE TRUE 2 TRUE</p>
<p>Absolute minimum support count: 24421</p>
<p>set item appearances …[0 item(s)] done [0.00s].
set transactions …[115 item(s), 48842 transaction(s)] done [0.03s].
sorting and recoding items … [9 item(s)] done [0.00s].
creating transaction tree … done [0.01s].
checking subsets of size 1 2 3 4 done [0.00s].
sorting transactions … done [0.01s].
writing … [49 set(s)] done [0.00s].
creating S4 object … done [0.00s].</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="reglas-de-asociación.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(patterns)</span></code></pre></div>
<p>set of 49 itemsets</p>
<p>most frequent items:
capital-loss=None capital-gain=None
23 21
native-country=United-States race=White
21 19
workclass=Private (Other)
14 20</p>
<p>element (itemset/transaction) length distribution:sizes
1 2 3 4
9 17 17 6</p>
<p>Min. 1st Qu. Median Mean 3rd Qu. Max.
1.000 2.000 2.000 2.408 3.000 4.000</p>
<p>summary of quality measures:
support count<br />
Min. :0.5051 Min. :24671<br />
1st Qu.:0.5434 1st Qu.:26540<br />
Median :0.5942 Median :29024<br />
Mean :0.6449 Mean :31497<br />
3rd Qu.:0.7404 3rd Qu.:36164<br />
Max. :0.9533 Max. :46560</p>
<p>includes transaction ID lists: FALSE</p>
<p>mining info:
data ntransactions support confidence
Adult 48842 0.5 1
call
apriori(data = Adult, parameter = list(supp = 0.5, conf = 0.9, maxlen = 10, target = “frequent itemsets”))</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="reglas-de-asociación.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">tail</span>(patterns))</span></code></pre></div>
<pre><code>items                            support count</code></pre>
<p>[1] {race=White,<br />
sex=Male,<br />
capital-loss=None,<br />
native-country=United-States} 0.5113632 24976
[2] {sex=Male,<br />
capital-gain=None,<br />
capital-loss=None,<br />
native-country=United-States} 0.5084149 24832
[3] {workclass=Private,<br />
race=White,<br />
capital-loss=None,<br />
native-country=United-States} 0.5181401 25307
[4] {workclass=Private,<br />
race=White,<br />
capital-gain=None,<br />
capital-loss=None} 0.5204742 25421
[5] {workclass=Private,<br />
capital-gain=None,<br />
capital-loss=None,<br />
native-country=United-States} 0.5414807 26447
[6] {race=White,<br />
capital-gain=None,<br />
capital-loss=None,<br />
native-country=United-States} 0.6803980 33232</p>
<blockquote>
<p>appearance: especificar restricciones en la extracción de las asociaciones.</p>
</blockquote>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="reglas-de-asociación.html#cb21-1" aria-hidden="true" tabindex="-1"></a>rules1 <span class="ot">&lt;-</span> <span class="fu">apriori</span>(Adult,  </span>
<span id="cb21-2"><a href="reglas-de-asociación.html#cb21-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">supp =</span> <span class="fl">0.5</span>, <span class="at">conf =</span> <span class="fl">0.9</span>), </span>
<span id="cb21-3"><a href="reglas-de-asociación.html#cb21-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">appearance =</span> <span class="fu">list</span>(<span class="at">items =</span> <span class="fu">c</span>(<span class="st">&quot;income=small&quot;</span>, <span class="st">&quot;sex=Male&quot;</span>))) </span></code></pre></div>
<p>Apriori</p>
<p>Parameter specification:
confidence minval smax arem aval originalSupport maxtime support minlen
0.9 0.1 1 none FALSE TRUE 5 0.5 1
maxlen target ext
10 rules TRUE</p>
<p>Algorithmic control:
filter tree heap memopt load sort verbose
0.1 TRUE TRUE FALSE TRUE 2 TRUE</p>
<p>Absolute minimum support count: 24421</p>
<p>set item appearances …[2 item(s)] done [0.00s].
set transactions …[2 item(s), 48842 transaction(s)] done [0.02s].
sorting and recoding items … [2 item(s)] done [0.00s].
creating transaction tree … done [0.01s].
checking subsets of size 1 2 done [0.00s].
writing … [0 rule(s)] done [0.00s].
creating S4 object … done [0.00s].</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="reglas-de-asociación.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">head</span>(rules1)) </span>
<span id="cb22-2"><a href="reglas-de-asociación.html#cb22-2" aria-hidden="true" tabindex="-1"></a>                 </span>
<span id="cb22-3"><a href="reglas-de-asociación.html#cb22-3" aria-hidden="true" tabindex="-1"></a>rules2 <span class="ot">&lt;-</span> <span class="fu">apriori</span>(Adult,  </span>
<span id="cb22-4"><a href="reglas-de-asociación.html#cb22-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">supp =</span> <span class="fl">0.5</span>, <span class="at">conf =</span> <span class="fl">0.9</span>), </span>
<span id="cb22-5"><a href="reglas-de-asociación.html#cb22-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">appearance =</span> <span class="fu">list</span>(<span class="at">none =</span> <span class="fu">c</span>(<span class="st">&quot;income=small&quot;</span>, <span class="st">&quot;sex=Male&quot;</span>))) </span></code></pre></div>
<p>Apriori</p>
<p>Parameter specification:
confidence minval smax arem aval originalSupport maxtime support minlen
0.9 0.1 1 none FALSE TRUE 5 0.5 1
maxlen target ext
10 rules TRUE</p>
<p>Algorithmic control:
filter tree heap memopt load sort verbose
0.1 TRUE TRUE FALSE TRUE 2 TRUE</p>
<p>Absolute minimum support count: 24421</p>
<p>set item appearances …[2 item(s)] done [0.00s].
set transactions …[115 item(s), 48842 transaction(s)] done [0.03s].
sorting and recoding items … [7 item(s)] done [0.00s].
creating transaction tree … done [0.01s].
checking subsets of size 1 2 3 4 done [0.00s].
writing … [39 rule(s)] done [0.00s].
creating S4 object … done [0.00s].</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="reglas-de-asociación.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">head</span>(rules2))                              </span></code></pre></div>
<pre><code>lhs                           rhs                 support   confidence</code></pre>
<p>[1] {} =&gt; {capital-gain=None} 0.9173867 0.9173867
[2] {} =&gt; {capital-loss=None} 0.9532779 0.9532779
[3] {hours-per-week=Full-time} =&gt; {capital-gain=None} 0.5435895 0.9290688
[4] {hours-per-week=Full-time} =&gt; {capital-loss=None} 0.5606650 0.9582531
[5] {workclass=Private} =&gt; {capital-gain=None} 0.6413742 0.9239073
[6] {workclass=Private} =&gt; {capital-loss=None} 0.6639982 0.9564974
coverage lift count
[1] 1.0000000 1.000000 44807
[2] 1.0000000 1.000000 46560
[3] 0.5850907 1.012734 26550
[4] 0.5850907 1.005219 27384
[5] 0.6941976 1.007108 31326
[6] 0.6941976 1.003377 32431</p>
</div>
</div>
<div id="reglas-de-asociación---preprocesamiento" class="section level2 hasAnchor" number="8.3">
<h2><span class="header-section-number">8.3</span> Reglas de Asociación - preprocesamiento<a href="reglas-de-asociación.html#reglas-de-asociación---preprocesamiento" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<blockquote>
<blockquote>
<p>Explorando el dataset <strong>AdultUCI</strong></p>
</blockquote>
</blockquote>
<p>Contiene los datos del dataset que originalmente se llamó ‘Census Income’ Database en formato data.frame.</p>
<p>El dataset <strong>Adult</strong> del apartado anterior tiene los datos preparados para el cómputo de las reglas.
El tipo de datos de este dataset es <strong>transactions</strong> que es adecuado para el paquete arules.</p>
<p>El dataset AdultUCI:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="reglas-de-asociación.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(arules)</span>
<span id="cb25-2"><a href="reglas-de-asociación.html#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;AdultUCI&quot;</span>)</span>
<span id="cb25-3"><a href="reglas-de-asociación.html#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="co">#View(AdultUCI)</span></span>
<span id="cb25-4"><a href="reglas-de-asociación.html#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(AdultUCI)</span></code></pre></div>
<p>‘data.frame’: 48842 obs. of 15 variables:
$ age : int 39 50 38 53 28 37 49 52 31 42 …
$ workclass : Factor w/ 8 levels “Federal-gov”,..: 7 6 4 4 4 4 4 6 4 4 …
$ fnlwgt : int 77516 83311 215646 234721 338409 284582 160187 209642 45781 159449 …
$ education : Ord.factor w/ 16 levels “Preschool”&lt;“1st-4th”&lt;..: 14 14 9 7 14 15 5 9 15 14 …
$ education-num : int 13 13 9 7 13 14 5 9 14 13 …
$ marital-status: Factor w/ 7 levels “Divorced”,“Married-AF-spouse”,..: 5 3 1 3 3 3 4 3 5 3 …
$ occupation : Factor w/ 14 levels “Adm-clerical”,..: 1 4 6 6 10 4 8 4 10 4 …
$ relationship : Factor w/ 6 levels “Husband”,“Not-in-family”,..: 2 1 2 1 6 6 2 1 2 1 …
$ race : Factor w/ 5 levels “Amer-Indian-Eskimo”,..: 5 5 5 3 3 5 3 5 5 5 …
$ sex : Factor w/ 2 levels “Female”,“Male”: 2 2 2 2 1 1 1 2 1 2 …
$ capital-gain : int 2174 0 0 0 0 0 0 0 14084 5178 …
$ capital-loss : int 0 0 0 0 0 0 0 0 0 0 …
$ hours-per-week: int 40 13 40 40 40 40 16 45 50 40 …
$ native-country: Factor w/ 41 levels “Cambodia”,“Canada”,..: 39 39 39 39 5 39 23 39 39 39 …
$ income : Ord.factor w/ 2 levels “small”&lt;“large”: 1 1 1 1 1 1 1 2 2 2 …</p>
<p>En la mayoría de los datasets es necesario un primer paso de preprocesamiento.</p>
<p>A continuación aplicaremos el preprocesamiento a AdultUCI hasta convertirlo en transacciones que arules maneja adecuadamente.</p>
<div id="discretización-de-items" class="section level3 hasAnchor" number="8.3.1">
<h3><span class="header-section-number">8.3.1</span> Discretización de items<a href="reglas-de-asociación.html#discretización-de-items" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<blockquote>
<p>Borrar algunas columnas que no son interesantes: {}</p>
</blockquote>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="reglas-de-asociación.html#cb26-1" aria-hidden="true" tabindex="-1"></a>AdultUCI<span class="sc">$</span>fnlwgt <span class="ot">&lt;-</span><span class="cn">NULL</span>  </span>
<span id="cb26-2"><a href="reglas-de-asociación.html#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="do">## o  AdultUCI[[&quot;fnlwgt&quot;]] &lt;- NULL</span></span>
<span id="cb26-3"><a href="reglas-de-asociación.html#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="reglas-de-asociación.html#cb26-4" aria-hidden="true" tabindex="-1"></a>AdultUCI<span class="sc">$</span><span class="st">`</span><span class="at">education-num</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="cn">NULL</span> </span></code></pre></div>
<blockquote>
<p>Convertir a discretos valores numéricos: <em>age</em>, <em>hours-per-week</em>, <em>capital-gain</em>, <em>capital-loss</em>}.</p>
</blockquote>
<p>Usaremos comandos {} para hacerlo. A continuación un ejemplo de cómo funcionan estos dos comandos:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="reglas-de-asociación.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ejemplo de funcionamiento de cut y ordered</span></span>
<span id="cb27-2"><a href="reglas-de-asociación.html#cb27-2" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span></span>
<span id="cb27-3"><a href="reglas-de-asociación.html#cb27-3" aria-hidden="true" tabindex="-1"></a>v2 <span class="ot">&lt;-</span> <span class="fu">cut</span>(v,<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">25</span>,<span class="dv">50</span>,<span class="dv">75</span>,<span class="dv">100</span>),<span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;bajo&quot;</span>,<span class="st">&quot;medio&quot;</span>,<span class="st">&quot;alto&quot;</span>,<span class="st">&quot;muyalto&quot;</span>))</span>
<span id="cb27-4"><a href="reglas-de-asociación.html#cb27-4" aria-hidden="true" tabindex="-1"></a>v3 <span class="ot">&lt;-</span> <span class="fu">ordered</span>(v2)</span></code></pre></div>
<p>Aplicamos estas funciones a AdultUCI:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="reglas-de-asociación.html#cb28-1" aria-hidden="true" tabindex="-1"></a>AdultUCI<span class="sc">$</span>age <span class="ot">&lt;-</span> <span class="fu">ordered</span>(<span class="fu">cut</span>(AdultUCI[[ <span class="st">&quot;age&quot;</span>]], <span class="fu">c</span>(<span class="dv">15</span>,<span class="dv">25</span>,<span class="dv">45</span>,<span class="dv">65</span>,<span class="dv">100</span>)),</span>
<span id="cb28-2"><a href="reglas-de-asociación.html#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Young&quot;</span>, <span class="st">&quot;Middle-aged&quot;</span>, <span class="st">&quot;Senior&quot;</span>, <span class="st">&quot;Old&quot;</span>))</span>
<span id="cb28-3"><a href="reglas-de-asociación.html#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="reglas-de-asociación.html#cb28-4" aria-hidden="true" tabindex="-1"></a>AdultUCI[[ <span class="st">&quot;hours-per-week&quot;</span>]] <span class="ot">&lt;-</span> <span class="fu">ordered</span>(<span class="fu">cut</span>(AdultUCI[[ <span class="st">&quot;hours-per-week&quot;</span>]],</span>
<span id="cb28-5"><a href="reglas-de-asociación.html#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">25</span>,<span class="dv">40</span>,<span class="dv">60</span>,<span class="dv">168</span>)),</span>
<span id="cb28-6"><a href="reglas-de-asociación.html#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Part-time&quot;</span>, <span class="st">&quot;Full-time&quot;</span>, <span class="st">&quot;Over-time&quot;</span>, <span class="st">&quot;Workaholic&quot;</span>))</span>
<span id="cb28-7"><a href="reglas-de-asociación.html#cb28-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-8"><a href="reglas-de-asociación.html#cb28-8" aria-hidden="true" tabindex="-1"></a>AdultUCI[[ <span class="st">&quot;capital-gain&quot;</span>]] <span class="ot">&lt;-</span> <span class="fu">ordered</span>(<span class="fu">cut</span>(AdultUCI[[ <span class="st">&quot;capital-gain&quot;</span>]],</span>
<span id="cb28-9"><a href="reglas-de-asociación.html#cb28-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="sc">-</span><span class="cn">Inf</span>,<span class="dv">0</span>,<span class="fu">median</span>(AdultUCI[[ <span class="st">&quot;capital-gain&quot;</span>]][AdultUCI[[ <span class="st">&quot;capital-gain&quot;</span>]]<span class="sc">&gt;</span><span class="dv">0</span>]),</span>
<span id="cb28-10"><a href="reglas-de-asociación.html#cb28-10" aria-hidden="true" tabindex="-1"></a>  <span class="cn">Inf</span>)), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;None&quot;</span>, <span class="st">&quot;Low&quot;</span>, <span class="st">&quot;High&quot;</span>))</span>
<span id="cb28-11"><a href="reglas-de-asociación.html#cb28-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-12"><a href="reglas-de-asociación.html#cb28-12" aria-hidden="true" tabindex="-1"></a>AdultUCI[[ <span class="st">&quot;capital-loss&quot;</span>]] <span class="ot">&lt;-</span> <span class="fu">ordered</span>(<span class="fu">cut</span>(AdultUCI[[ <span class="st">&quot;capital-loss&quot;</span>]],</span>
<span id="cb28-13"><a href="reglas-de-asociación.html#cb28-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="sc">-</span><span class="cn">Inf</span>,<span class="dv">0</span>, <span class="fu">median</span>(AdultUCI[[ <span class="st">&quot;capital-loss&quot;</span>]][AdultUCI[[ <span class="st">&quot;capital-loss&quot;</span>]]<span class="sc">&gt;</span><span class="dv">0</span>]),</span>
<span id="cb28-14"><a href="reglas-de-asociación.html#cb28-14" aria-hidden="true" tabindex="-1"></a>  <span class="cn">Inf</span>)), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;None&quot;</span>, <span class="st">&quot;Low&quot;</span>, <span class="st">&quot;High&quot;</span>))</span></code></pre></div>
<p>Llamamos a <strong>apriori</strong>:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="reglas-de-asociación.html#cb29-1" aria-hidden="true" tabindex="-1"></a>reg <span class="ot">&lt;-</span> <span class="fu">apriori</span>(AdultUCI)</span></code></pre></div>
<p>Apriori</p>
<p>Parameter specification:
confidence minval smax arem aval originalSupport maxtime support minlen
0.8 0.1 1 none FALSE TRUE 5 0.1 1
maxlen target ext
10 rules TRUE</p>
<p>Algorithmic control:
filter tree heap memopt load sort verbose
0.1 TRUE TRUE FALSE TRUE 2 TRUE</p>
<p>Absolute minimum support count: 4884</p>
<p>set item appearances …[0 item(s)] done [0.00s].
set transactions …[115 item(s), 48842 transaction(s)] done [0.03s].
sorting and recoding items … [31 item(s)] done [0.00s].
creating transaction tree … done [0.02s].
checking subsets of size 1 2 3 4 5 6 7 8 9 done [0.07s].
writing … [6137 rule(s)] done [0.00s].
creating S4 object … done [0.00s].</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="reglas-de-asociación.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">head</span>(reg))</span></code></pre></div>
<pre><code>lhs                         rhs                            support  </code></pre>
<p>[1] {} =&gt; {race=White} 0.8550428
[2] {} =&gt; {native-country=United-States} 0.8974243
[3] {} =&gt; {capital-gain=None} 0.9173867
[4] {} =&gt; {capital-loss=None} 0.9532779
[5] {relationship=Unmarried} =&gt; {capital-loss=None} 0.1019819
[6] {occupation=Sales} =&gt; {race=White} 0.1005282
confidence coverage lift count
[1] 0.8550428 1.0000000 1.000000 41762
[2] 0.8974243 1.0000000 1.000000 43832
[3] 0.9173867 1.0000000 1.000000 44807
[4] 0.9532779 1.0000000 1.000000 46560
[5] 0.9719024 0.1049302 1.019537 4981
[6] 0.8920785 0.1126899 1.043314 4910</p>
</div>
<div id="tipo-de-dato-transactions" class="section level3 hasAnchor" number="8.3.2">
<h3><span class="header-section-number">8.3.2</span> Tipo de dato <em>transactions</em><a href="reglas-de-asociación.html#tipo-de-dato-transactions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Ver <a href="https://www.r-bloggers.com/data-frames-and-transactions/" class="uri">https://www.r-bloggers.com/data-frames-and-transactions/</a>}</p>
<p>Comparamos AdultUCI que hemos procesado con Adult.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="reglas-de-asociación.html#cb32-1" aria-hidden="true" tabindex="-1"></a>Adult1 <span class="ot">&lt;-</span> <span class="fu">as</span>(AdultUCI, <span class="st">&quot;transactions&quot;</span>)</span>
<span id="cb32-2"><a href="reglas-de-asociación.html#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(Adult1)</span></code></pre></div>
<p>[1] “transactions”
attr(,“package”)
[1] “arules”</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="reglas-de-asociación.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(Adult1)</span></code></pre></div>
<p>[1] 48842</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="reglas-de-asociación.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(Adult1)</span></code></pre></div>
<p>[1] 48842 115</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="reglas-de-asociación.html#cb35-1" aria-hidden="true" tabindex="-1"></a>Adult1</span></code></pre></div>
<p>transactions in sparse format with
48842 transactions (rows) and
115 items (columns)</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="reglas-de-asociación.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(Adult1[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>])</span></code></pre></div>
<pre><code>items                                transactionID</code></pre>
<p>[1] {age=Middle-aged,<br />
workclass=State-gov,<br />
education=Bachelors,<br />
marital-status=Never-married,<br />
occupation=Adm-clerical,<br />
relationship=Not-in-family,<br />
race=White,<br />
sex=Male,<br />
capital-gain=Low,<br />
capital-loss=None,<br />
hours-per-week=Full-time,<br />
native-country=United-States,<br />
income=small} 1
[2] {age=Senior,<br />
workclass=Self-emp-not-inc,<br />
education=Bachelors,<br />
marital-status=Married-civ-spouse,<br />
occupation=Exec-managerial,<br />
relationship=Husband,<br />
race=White,<br />
sex=Male,<br />
capital-gain=None,<br />
capital-loss=None,<br />
hours-per-week=Part-time,<br />
native-country=United-States,<br />
income=small} 2</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="reglas-de-asociación.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;Adult&quot;</span>)</span>
<span id="cb38-2"><a href="reglas-de-asociación.html#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(Adult)</span></code></pre></div>
<p>[1] “transactions”
attr(,“package”)
[1] “arules”</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="reglas-de-asociación.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(Adult)</span></code></pre></div>
<p>[1] 48842</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="reglas-de-asociación.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(Adult)</span></code></pre></div>
<p>[1] 48842 115</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="reglas-de-asociación.html#cb41-1" aria-hidden="true" tabindex="-1"></a>Adult</span></code></pre></div>
<p>transactions in sparse format with
48842 transactions (rows) and
115 items (columns)</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="reglas-de-asociación.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(Adult[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>])</span></code></pre></div>
<pre><code>items                                transactionID</code></pre>
<p>[1] {age=Middle-aged,<br />
workclass=State-gov,<br />
education=Bachelors,<br />
marital-status=Never-married,<br />
occupation=Adm-clerical,<br />
relationship=Not-in-family,<br />
race=White,<br />
sex=Male,<br />
capital-gain=Low,<br />
capital-loss=None,<br />
hours-per-week=Full-time,<br />
native-country=United-States,<br />
income=small} 1
[2] {age=Senior,<br />
workclass=Self-emp-not-inc,<br />
education=Bachelors,<br />
marital-status=Married-civ-spouse,<br />
occupation=Exec-managerial,<br />
relationship=Husband,<br />
race=White,<br />
sex=Male,<br />
capital-gain=None,<br />
capital-loss=None,<br />
hours-per-week=Part-time,<br />
native-country=United-States,<br />
income=small} 2</p>
</div>
<div id="métodos-de-arules" class="section level3 hasAnchor" number="8.3.3">
<h3><span class="header-section-number">8.3.3</span> Métodos de arules<a href="reglas-de-asociación.html#métodos-de-arules" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>summary(): Visión del conjunto de reglas.</li>
<li>length(): Número de reglas.</li>
<li>items(): Elementos involucrados.</li>
<li>sort(): Ordenar.</li>
<li>subset(): Elementos involucrados. (see help(subset). Seleccionar reglas que cumplan ciertos criterios.</li>
<li>union(), intersect(), setequal(), match() (usar ayuda help(xxx) ).<br />
</li>
<li>write(): Escribir reglas con formato más adequado.</li>
</ul>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="reglas-de-asociación.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;Adult&quot;</span>)</span>
<span id="cb44-2"><a href="reglas-de-asociación.html#cb44-2" aria-hidden="true" tabindex="-1"></a>r1 <span class="ot">&lt;-</span> <span class="fu">apriori</span>(Adult[<span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span>], <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">support =</span> <span class="fl">0.5</span>))</span>
<span id="cb44-3"><a href="reglas-de-asociación.html#cb44-3" aria-hidden="true" tabindex="-1"></a>r2 <span class="ot">&lt;-</span> <span class="fu">apriori</span>(Adult[<span class="dv">1001</span><span class="sc">:</span><span class="dv">2000</span>], <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">support =</span> <span class="fl">0.5</span>))</span>
<span id="cb44-4"><a href="reglas-de-asociación.html#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Convertir en un dataframe</span></span>
<span id="cb44-5"><a href="reglas-de-asociación.html#cb44-5" aria-hidden="true" tabindex="-1"></a>dfr1 <span class="ot">&lt;-</span><span class="fu">DATAFRAME</span>(r1)</span>
<span id="cb44-6"><a href="reglas-de-asociación.html#cb44-6" aria-hidden="true" tabindex="-1"></a>r_comb <span class="ot">&lt;-</span> <span class="fu">c</span>(r1, r2)</span>
<span id="cb44-7"><a href="reglas-de-asociación.html#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="fu">duplicated</span>(r_comb)</span>
<span id="cb44-8"><a href="reglas-de-asociación.html#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="fu">intersect</span>(r1,r2)</span>
<span id="cb44-9"><a href="reglas-de-asociación.html#cb44-9" aria-hidden="true" tabindex="-1"></a><span class="fu">union</span>(r1,r2)</span>
<span id="cb44-10"><a href="reglas-de-asociación.html#cb44-10" aria-hidden="true" tabindex="-1"></a><span class="fu">lhs</span>(reglas1)</span>
<span id="cb44-11"><a href="reglas-de-asociación.html#cb44-11" aria-hidden="true" tabindex="-1"></a><span class="fu">rhs</span>(reglas1)</span>
<span id="cb44-12"><a href="reglas-de-asociación.html#cb44-12" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="fu">lhs</span>(reglas1))</span></code></pre></div>
</div>
</div>
<div id="ejercicio-en-laboratorio" class="section level2 hasAnchor" number="8.4">
<h2><span class="header-section-number">8.4</span> Ejercicio en Laboratorio<a href="reglas-de-asociación.html#ejercicio-en-laboratorio" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Utilizar con el dataset <strong>Adult</strong> los métodos y operaciones vistos en el presente documento.</p>
</div>
<div id="arulesviz" class="section level2 hasAnchor" number="8.5">
<h2><span class="header-section-number">8.5</span> arulesViz<a href="reglas-de-asociación.html#arulesviz" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Vamos a usar el dataset Groceries para ver los comandos de visualización de reglas de asociación más interesantes.</p>
<p>Extraemos las reglas:
Apriori</p>
<p>Parameter specification:
confidence minval smax arem aval originalSupport maxtime support minlen
0.5 0.1 1 none FALSE TRUE 5 0.001 1
maxlen target ext
10 rules TRUE</p>
<p>Algorithmic control:
filter tree heap memopt load sort verbose
0.1 TRUE TRUE FALSE TRUE 2 TRUE</p>
<p>Absolute minimum support count: 9</p>
<p>set item appearances …[0 item(s)] done [0.00s].
set transactions …[169 item(s), 9835 transaction(s)] done [0.00s].
sorting and recoding items … [157 item(s)] done [0.00s].
creating transaction tree … done [0.00s].
checking subsets of size 1 2 3 4 5 6 done [0.01s].
writing … [5668 rule(s)] done [0.00s].
creating S4 object … done [0.00s].
set of 5668 rules
lhs rhs support confidence coverage<br />
[1] {honey} =&gt; {whole milk} 0.001118454 0.7333333 0.001525165
[2] {tidbits} =&gt; {rolls/buns} 0.001220132 0.5217391 0.002338587
[3] {cocoa drinks} =&gt; {whole milk} 0.001321810 0.5909091 0.002236909
[4] {pudding powder} =&gt; {whole milk} 0.001321810 0.5652174 0.002338587
[5] {cooking chocolate} =&gt; {whole milk} 0.001321810 0.5200000 0.002541942
[6] {cereals} =&gt; {whole milk} 0.003660397 0.6428571 0.005693950
lift count
[1] 2.870009 11<br />
[2] 2.836542 12<br />
[3] 2.312611 13<br />
[4] 2.212062 13<br />
[5] 2.035097 13<br />
[6] 2.515917 36</p>
<p>El comando básico de visualización de reglas es <strong>plot</strong>. Mostramos distintas opciones de uso de plot (colores).
<img src="_main_files/figure-html/unnamed-chunk-92-1.png" width="672" /><img src="_main_files/figure-html/unnamed-chunk-92-2.png" width="672" /><img src="_main_files/figure-html/unnamed-chunk-92-3.png" width="672" /></p>
<p>Opción de visualización interactiva:</p>
<p>Representación matricial de las reglas:</p>
<p>set of 52 rules
Itemsets in Antecedent (LHS)
[1] “{Instant food products,soda}”<br />
[2] “{soda,popcorn}”<br />
[3] “{flour,baking powder}”<br />
[4] “{ham,processed cheese}”<br />
[5] “{whole milk,Instant food products}”<br />
[6] “{other vegetables,curd,yogurt,whipped/sour cream}”<br />
[7] “{processed cheese,domestic eggs}”<br />
[8] “{tropical fruit,other vegetables,yogurt,white bread}”<br />
[9] “{hamburger meat,yogurt,whipped/sour cream}”<br />
[10] “{tropical fruit,other vegetables,whole milk,yogurt,domestic eggs}”<br />
[11] “{liquor,red/blush wine}”<br />
[12] “{other vegetables,yogurt,whipped/sour cream,cream cheese }”<br />
[13] “{yogurt,whipped/sour cream,hard cheese}”<br />
[14] “{tropical fruit,root vegetables,other vegetables,whole milk,rolls/buns}”<br />
[15] “{tropical fruit,whole milk,yogurt,sliced cheese}”<br />
[16] “{other vegetables,butter,sugar}”<br />
[17] “{whole milk,whipped/sour cream,hard cheese}”<br />
[18] “{other vegetables,hard cheese,domestic eggs}”<br />
[19] “{tropical fruit,other vegetables,whipped/sour cream,fruit/vegetable juice}”
[20] “{tropical fruit,onions,yogurt}”<br />
[21] “{tropical fruit,other vegetables,yogurt,domestic eggs}”<br />
[22] “{butter,yogurt,pastry}”<br />
[23] “{whole milk,butter,hard cheese}”<br />
[24] “{tropical fruit,other vegetables,butter,fruit/vegetable juice}”<br />
[25] “{whole milk,curd,yogurt,cream cheese }”<br />
[26] “{tropical fruit,other vegetables,hard cheese}”<br />
[27] “{other vegetables,whole milk,whipped/sour cream,napkins}”<br />
[28] “{citrus fruit,whole milk,cream cheese }”<br />
[29] “{tropical fruit,other vegetables,frozen fish}”<br />
[30] “{butter,yogurt,hard cheese}”<br />
[31] “{curd,yogurt,sugar}”<br />
[32] “{other vegetables,whole milk,butter,soda}”<br />
[33] “{whole milk,cream cheese ,sugar}”<br />
[34] “{frozen vegetables,specialty chocolate}”<br />
[35] “{citrus fruit,other vegetables,whole milk,cream cheese }”<br />
[36] “{tropical fruit,whipped/sour cream,shopping bags}”<br />
[37] “{citrus fruit,tropical fruit,grapes}”<br />
[38] “{other vegetables,butter,hard cheese}”<br />
[39] “{whole milk,butter,sliced cheese}”<br />
[40] “{citrus fruit,other vegetables,soda,fruit/vegetable juice}”<br />
[41] “{tropical fruit,other vegetables,whole milk,yogurt,oil}”<br />
[42] “{tropical fruit,grapes,fruit/vegetable juice}”<br />
[43] “{frankfurter,tropical fruit,domestic eggs}”<br />
[44] “{tropical fruit,whole milk,yogurt,frozen meals}”<br />
[45] “{other vegetables,curd,yogurt,cream cheese }”<br />
[46] “{root vegetables,whole milk,flour}”<br />
[47] “{citrus fruit,whole milk,sugar}”<br />
[48] “{tropical fruit,other vegetables,misc. beverages}”<br />
[49] “{ham,tropical fruit,other vegetables}”<br />
[50] “{citrus fruit,grapes,fruit/vegetable juice}”<br />
[51] “{whole milk,whipped/sour cream,rolls/buns,pastry}”<br />
Itemsets in Consequent (RHS)
[1] “{tropical fruit}” “{citrus fruit}”<br />
[3] “{root vegetables}” “{pip fruit}”<br />
[5] “{fruit/vegetable juice}” “{domestic eggs}”<br />
[7] “{whipped/sour cream}” “{butter}”<br />
[9] “{curd}” “{beef}”<br />
[11] “{bottled beer}” “{white bread}”<br />
[13] “{cream cheese }” “{sugar}”<br />
[15] “{salty snack}” “{hamburger meat}”<br />
<img src="_main_files/figure-html/unnamed-chunk-94-1.png" width="672" /></p>
<p>E interactiva:</p>
<p>Representación matricial mostrando los items:</p>
<p>Representación mediante grafos de las reglas (solo para conjuntos pequeños de reglas):</p>
<p><img src="_main_files/figure-html/unnamed-chunk-97-1.png" width="672" />Available control parameters (with default values):
layout = stress
circular = FALSE
ggraphdots = NULL
edges = <environment>
nodes = <environment>
nodetext = <environment>
colors = c(“#EE0000FF”, “#EEEEEEFF”)
engine = ggplot2
max = 100
verbose = FALSE
<img src="_main_files/figure-html/unnamed-chunk-97-2.png" width="672" /></p>
<p>El paquete Graphviz permite una mejor visualización:</p>
<p><img src="_main_files/figure-html/unnamed-chunk-98-1.png" width="672" /></p>
<p>Permite visualización dinámica:</p>
</div>
<div id="construyendo-un-sistema-recomendador" class="section level2 hasAnchor" number="8.6">
<h2><span class="header-section-number">8.6</span> Construyendo un sistema recomendador<a href="reglas-de-asociación.html#construyendo-un-sistema-recomendador" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>El dataset <em>lastfm.csv</em> del CV incluye las transacciones recogidas en una radio online que almacena el identificador del usuario, artista, sexo del usuario y el país.</p>
<p><strong>Objetivo</strong>: Construir un sistema de recomendación de grupos de música a los usuarios a partir de dataset anterior.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="reglas-de-asociación.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(arules)</span>
<span id="cb45-2"><a href="reglas-de-asociación.html#cb45-2" aria-hidden="true" tabindex="-1"></a>lastfm <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/lastfm.csv&quot;</span>)</span>
<span id="cb45-3"><a href="reglas-de-asociación.html#cb45-3" aria-hidden="true" tabindex="-1"></a>lastfm[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>,]</span></code></pre></div>
<p>user artist sex country
1 1 red hot chili peppers f Germany
2 1 the black dahlia murder f Germany
3 1 goldfrapp f Germany
4 1 dropkick murphys f Germany
5 1 le tigre f Germany
6 1 schandmaul f Germany
7 1 edguy f Germany
8 1 jack johnson f Germany
9 1 eluveitie f Germany
10 1 the killers f Germany
11 1 judas priest f Germany
12 1 rob zombie f Germany
13 1 john mayer f Germany
14 1 the who f Germany
15 1 guano apes f Germany
16 1 the rolling stones f Germany
17 3 devendra banhart m United States
18 3 boards of canada m United States
19 3 cocorosie m United States
20 3 aphex twin m United States</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="reglas-de-asociación.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(lastfm<span class="sc">$</span>user)   <span class="do">## 289,955 filas</span></span></code></pre></div>
<p>[1] 289955</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="reglas-de-asociación.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(lastfm<span class="sc">$</span>user)</span></code></pre></div>
<p>[1] “integer”</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="reglas-de-asociación.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Necesitamos convertir este atributo a factor</span></span>
<span id="cb48-2"><a href="reglas-de-asociación.html#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="co">#para poder analizarlo con paquete {\tt arules}</span></span>
<span id="cb48-3"><a href="reglas-de-asociación.html#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="reglas-de-asociación.html#cb48-4" aria-hidden="true" tabindex="-1"></a>lastfm<span class="sc">$</span>user <span class="ot">&lt;-</span> <span class="fu">factor</span>(lastfm<span class="sc">$</span>user)</span>
<span id="cb48-5"><a href="reglas-de-asociación.html#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejecuta en tu ordenador</span></span>
<span id="cb48-6"><a href="reglas-de-asociación.html#cb48-6" aria-hidden="true" tabindex="-1"></a><span class="co"># levels(lastfm$user)  ## 15,000 users</span></span>
<span id="cb48-7"><a href="reglas-de-asociación.html#cb48-7" aria-hidden="true" tabindex="-1"></a><span class="co"># levels(lastfm$artist)  ## 1,004 artists</span></span></code></pre></div>
<p>Llamamos a <strong>apriori</strong>:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="reglas-de-asociación.html#cb49-1" aria-hidden="true" tabindex="-1"></a>reglas1 <span class="ot">&lt;-</span> <span class="fu">apriori</span>(lastfm,<span class="at">parameter=</span><span class="fu">list</span>(<span class="at">support=</span>.<span class="dv">01</span>, <span class="at">confidence=</span>.<span class="dv">5</span>))</span></code></pre></div>
<p>Apriori</p>
<p>Parameter specification:
confidence minval smax arem aval originalSupport maxtime support minlen
0.5 0.1 1 none FALSE TRUE 5 0.01 1
maxlen target ext
10 rules TRUE</p>
<p>Algorithmic control:
filter tree heap memopt load sort verbose
0.1 TRUE TRUE FALSE TRUE 2 TRUE</p>
<p>Absolute minimum support count: 2899</p>
<p>set item appearances …[0 item(s)] done [0.00s].
set transactions …[16165 item(s), 289955 transaction(s)] done [0.26s].
sorting and recoding items … [21 item(s)] done [0.00s].
creating transaction tree … done [0.06s].
checking subsets of size 1 2 done [0.00s].
writing … [19 rule(s)] done [0.00s].
creating S4 object … done [0.01s].</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="reglas-de-asociación.html#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(reglas1)</span></code></pre></div>
<pre><code> lhs                             rhs     support    confidence coverage  </code></pre>
<p>[1] {} =&gt; {sex=m} 0.73053750 0.7305375 1.00000000
[2] {country=Czech Republic} =&gt; {sex=m} 0.01039472 0.8033049 0.01293994
[3] {country=Mexico} =&gt; {sex=m} 0.01023607 0.7804365 0.01311583
[4] {country=Norway} =&gt; {sex=m} 0.01239503 0.7744021 0.01600593
[5] {country=Turkey} =&gt; {sex=m} 0.01088445 0.6627467 0.01642324
[6] {country=Italy} =&gt; {sex=m} 0.01501612 0.7615882 0.01971685
[7] {country=France} =&gt; {sex=m} 0.01707161 0.8302583 0.02056181
[8] {country=Australia} =&gt; {sex=m} 0.01497474 0.6776963 0.02209653
[9] {country=Canada} =&gt; {sex=m} 0.01568174 0.6563222 0.02389336
[10] {country=Spain} =&gt; {sex=m} 0.02482109 0.7720446 0.03214982
[11] {country=Netherlands} =&gt; {sex=m} 0.02690417 0.8064716 0.03336035
[12] {country=Finland} =&gt; {sex=m} 0.02661103 0.7596731 0.03502957
[13] {country=Russian Federation} =&gt; {sex=m} 0.03062544 0.7605344 0.04026832
[14] {country=Brazil} =&gt; {sex=m} 0.03001845 0.7300788 0.04111673
[15] {country=Sweden} =&gt; {sex=m} 0.03193254 0.7479603 0.04269283
[16] {country=Poland} =&gt; {sex=m} 0.03854391 0.6531471 0.05901261
[17] {country=Germany} =&gt; {sex=m} 0.06069907 0.7257433 0.08363712
[18] {country=United Kingdom} =&gt; {sex=m} 0.07730510 0.8110211 0.09531824
[19] {country=United States} =&gt; {sex=m} 0.13852839 0.6744182 0.20540429
lift count
[1] 1.0000000 211823
[2] 1.0996080 3014
[3] 1.0683045 2968
[4] 1.0600442 3594
[5] 0.9072043 3156
[6] 1.0425040 4354
[7] 1.1365033 4950
[8] 0.9276680 4342
[9] 0.8984100 4547
[10] 1.0568172 7197
[11] 1.1039428 7801
[12] 1.0398825 7716
[13] 1.0410615 8880
[14] 0.9993722 8704
[15] 1.0238492 9259
[16] 0.8940638 11176
[17] 0.9934374 17600
[18] 1.1101703 22415
[19] 0.9231808 40167</p>
<p>Comentario: En versiones anteriores de arules el anterior comando daba error. Teníamos que convertir a factor las variables discretas. Es un paquete <em>vivo</em> que va evolucionando día a día.</p>
<!-- El dataset no es de tipo transacciones.  -->
<!-- ## Preprocesamiento -->
<!-- Realizamos el preprocesamiento para poder usar apriori.   -->
<!-- ```{r} -->
<!-- lastfm$sex <- factor(lastfm$sex) -->
<!-- lastfm$country <- factor(lastfm$country) -->
<!-- reglas1 <- apriori(lastfm, parameter=list(support=.01, confidence=.5)) -->
<!-- inspect(head(reglas1)) -->
<!-- ``` -->
<p><strong>¿Cual es la recomendación que podemos obtener con estas reglas?</strong></p>
<p>No es el tipo de reglas que queremos obtener para nuestro sistema de recomendación.</p>
<p>Los datos deben ser manipulados para poder encontrar lo que nos interesa. Usaremos los Comandos: <strong>split, lapply</strong>.</p>
<p>Primero me quedo con una lista de lo que escucha cada usuario:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="reglas-de-asociación.html#cb52-1" aria-hidden="true" tabindex="-1"></a>lista.musica.por.usuario <span class="ot">&lt;-</span> <span class="fu">split</span>(<span class="at">x=</span>lastfm[,<span class="st">&quot;artist&quot;</span>],<span class="at">f=</span>lastfm<span class="sc">$</span>user)</span>
<span id="cb52-2"><a href="reglas-de-asociación.html#cb52-2" aria-hidden="true" tabindex="-1"></a>lista.musica.por.usuario[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span></code></pre></div>
<p>$<code>1</code>
[1] “red hot chili peppers” “the black dahlia murder”
[3] “goldfrapp” “dropkick murphys”<br />
[5] “le tigre” “schandmaul”<br />
[7] “edguy” “jack johnson”<br />
[9] “eluveitie” “the killers”<br />
[11] “judas priest” “rob zombie”<br />
[13] “john mayer” “the who”<br />
[15] “guano apes” “the rolling stones”</p>
<p>$<code>3</code>
[1] “devendra banhart” “boards of canada” “cocorosie”<br />
[4] “aphex twin” “animal collective” “atmosphere”<br />
[7] “joanna newsom” “air” “portishead”<br />
[10] “massive attack” “broken social scene” “arcade fire”<br />
[13] “plaid” “prefuse 73” “m83”<br />
[16] “the flashbulb” “pavement” “goldfrapp”<br />
[19] “amon tobin” “sage francis” “four tet”<br />
[22] “max richter” “autechre” “radiohead”<br />
[25] “neutral milk hotel” “beastie boys” “aesop rock”<br />
[28] “mf doom” “the books”</p>
<p>A continuación:</p>
<ul>
<li>Un grupo/cantante podría estar dos veces en un usuario: eliminar repeticiones</li>
<li>Convertir a formato transacciones</li>
<li>Mirar la música escuchada por los primeros usuarios</li>
</ul>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="reglas-de-asociación.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Eliminar duplicados  </span></span>
<span id="cb53-2"><a href="reglas-de-asociación.html#cb53-2" aria-hidden="true" tabindex="-1"></a>lista.musica.por.usuario <span class="ot">&lt;-</span> <span class="fu">lapply</span>(lista.musica.por.usuario,unique)</span>
<span id="cb53-3"><a href="reglas-de-asociación.html#cb53-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-4"><a href="reglas-de-asociación.html#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertimos en transacciones la lista de música.</span></span>
<span id="cb53-5"><a href="reglas-de-asociación.html#cb53-5" aria-hidden="true" tabindex="-1"></a>lista.musica.por.usuario1 <span class="ot">&lt;-</span> <span class="fu">as</span>(lista.musica.por.usuario,<span class="st">&quot;transactions&quot;</span>)</span>
<span id="cb53-6"><a href="reglas-de-asociación.html#cb53-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-7"><a href="reglas-de-asociación.html#cb53-7" aria-hidden="true" tabindex="-1"></a>lista.musica.por.usuario[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span></code></pre></div>
<p>$<code>1</code>
[1] “red hot chili peppers” “the black dahlia murder”
[3] “goldfrapp” “dropkick murphys”<br />
[5] “le tigre” “schandmaul”<br />
[7] “edguy” “jack johnson”<br />
[9] “eluveitie” “the killers”<br />
[11] “judas priest” “rob zombie”<br />
[13] “john mayer” “the who”<br />
[15] “guano apes” “the rolling stones”</p>
<p>$<code>3</code>
[1] “devendra banhart” “boards of canada” “cocorosie”<br />
[4] “aphex twin” “animal collective” “atmosphere”<br />
[7] “joanna newsom” “air” “portishead”<br />
[10] “massive attack” “broken social scene” “arcade fire”<br />
[13] “plaid” “prefuse 73” “m83”<br />
[16] “the flashbulb” “pavement” “goldfrapp”<br />
[19] “amon tobin” “sage francis” “four tet”<br />
[22] “max richter” “autechre” “radiohead”<br />
[25] “neutral milk hotel” “beastie boys” “aesop rock”<br />
[28] “mf doom” “the books”</p>
<p>$<code>4</code>
[1] “tv on the radio” “tool”<br />
[3] “kyuss” “dj shadow”<br />
[5] “air” “a tribe called quest”<br />
[7] “the cinematic orchestra” “beck”<br />
[9] “bon iver” “röyksopp”<br />
[11] “bonobo” “the decemberists”<br />
[13] “snow patrol” “battles”<br />
[15] “the prodigy” “pink floyd”<br />
[17] “rjd2” “the flaming lips”<br />
[19] “michael jackson” “mgmt”<br />
[21] “the rolling stones” “late of the pier”<br />
[23] “flight of the conchords” “simian mobile disco”<br />
[25] “muse” “fleetwood mac”<br />
[27] “led zeppelin”</p>
<p>$<code>5</code>
[1] “dream theater” “ac/dc”<br />
[3] “metallica” “iron maiden”<br />
[5] “bob marley &amp; the wailers” “megadeth”<br />
[7] “children of bodom” “trivium”<br />
[9] “nightwish” “sublime”<br />
[11] “volbeat”</p>
<p>$<code>6</code>
[1] “lily allen” “kanye west” “sigur rós”<br />
[4] “pink floyd” “stevie wonder” “metallica”<br />
[7] “thievery corporation” “iron maiden” “the streets”<br />
[10] “muse” “faith no more” “manu chao”<br />
[13] “tenacious d” “depeche mode” “justin timberlake”<br />
[16] “green day” “snow patrol” “dream theater”<br />
[19] “u2” “jay-z” “type o negative”<br />
[22] “pearl jam” “queen”</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="reglas-de-asociación.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># en la versión actual de R esto va bien</span></span>
<span id="cb54-2"><a href="reglas-de-asociación.html#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="co">#error ¿? (en versiones anteriores de R daba error, si os pasa intentar siguientes comandos)</span></span>
<span id="cb54-3"><a href="reglas-de-asociación.html#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="co">#lista.musica.por.usuario2 &lt;- as(lapply(lista.musica.por.usuario, &quot;[[&quot;, 1), &quot;transactions&quot;)</span></span>
<span id="cb54-4"><a href="reglas-de-asociación.html#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="co">#lista.musica.por.usuario2</span></span></code></pre></div>
<p>Visualizamos lo que hemos conseguido hasta el momento:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="reglas-de-asociación.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(lista.musica.por.usuario1)</span></code></pre></div>
<p>Formal class ‘transactions’ [package “arules”] with 3 slots
..@ data :Formal class ‘ngCMatrix’ [package “Matrix”] with 5 slots
.. .. ..@ i : int [1:289953] 280 288 299 373 383 429 457 468 512 714 …
.. .. ..@ p : int [1:15001] 0 16 45 72 83 106 128 147 177 184 …
.. .. ..@ Dim : int [1:2] 1004 15000
.. .. ..@ Dimnames:List of 2
.. .. .. ..$ : NULL
.. .. .. ..$ : NULL
.. .. ..@ factors : list()
..@ itemInfo :‘data.frame’: 1004 obs. of 1 variable:
.. ..$ labels: chr [1:1004] “…and you will know us by the trail of dead” “[unknown]” “2pac” “3 doors down” …
..@ itemsetInfo:‘data.frame’: 15000 obs. of 1 variable:
.. ..$ transactionID: chr [1:15000] “1” “3” “4” “5” …</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="reglas-de-asociación.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write</span>(<span class="fu">head</span>(lista.musica.por.usuario1))</span></code></pre></div>
<p>“dropkick murphys” “edguy” “eluveitie” “goldfrapp” “guano apes” “jack johnson” “john mayer” “judas priest” “le tigre” “red hot chili peppers” “rob zombie” “schandmaul” “the black dahlia murder” “the killers” “the rolling stones” “the who”
“aesop rock” “air” “amon tobin” “animal collective” “aphex twin” “arcade fire” “atmosphere” “autechre” “beastie boys” “boards of canada” “broken social scene” “cocorosie” “devendra banhart” “four tet” “goldfrapp” “joanna newsom” “m83” “massive attack” “max richter” “mf doom” “neutral milk hotel” “pavement” “plaid” “portishead” “prefuse 73” “radiohead” “sage francis” “the books” “the flashbulb”
“a tribe called quest” “air” “battles” “beck” “bon iver” “bonobo” “dj shadow” “fleetwood mac” “flight of the conchords” “kyuss” “late of the pier” “led zeppelin” “mgmt” “michael jackson” “muse” “pink floyd” “rjd2” “röyksopp” “simian mobile disco” “snow patrol” “the cinematic orchestra” “the decemberists” “the flaming lips” “the prodigy” “the rolling stones” “tool” “tv on the radio”
“ac/dc” “bob marley &amp; the wailers” “children of bodom” “dream theater” “iron maiden” “megadeth” “metallica” “nightwish” “sublime” “trivium” “volbeat”
“depeche mode” “dream theater” “faith no more” “green day” “iron maiden” “jay-z” “justin timberlake” “kanye west” “lily allen” “manu chao” “metallica” “muse” “pearl jam” “pink floyd” “queen” “sigur rós” “snow patrol” “stevie wonder” “tenacious d” “the streets” “thievery corporation” “type o negative” “u2”
“ac/dc” “aerosmith” “alice in chains” “audioslave” “buckethead” “camel” “disturbed” “dream theater” “jethro tull” “king crimson” “led zeppelin” “oasis” “pearl jam” “pink floyd” “porcupine tree” “rammstein” “rush” “soundgarden” “stone temple pilots” “the verve” “tool” “type o negative”</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="reglas-de-asociación.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write</span>(<span class="fu">head</span>(lista.musica.por.usuario1),<span class="at">format=</span><span class="st">&quot;single&quot;</span>)</span></code></pre></div>
<p>“1” “dropkick murphys”
“1” “edguy”
“1” “eluveitie”
“1” “goldfrapp”
“1” “guano apes”
“1” “jack johnson”
“1” “john mayer”
“1” “judas priest”
“1” “le tigre”
“1” “red hot chili peppers”
“1” “rob zombie”
“1” “schandmaul”
“1” “the black dahlia murder”
“1” “the killers”
“1” “the rolling stones”
“1” “the who”
“3” “aesop rock”
“3” “air”
“3” “amon tobin”
“3” “animal collective”
“3” “aphex twin”
“3” “arcade fire”
“3” “atmosphere”
“3” “autechre”
“3” “beastie boys”
“3” “boards of canada”
“3” “broken social scene”
“3” “cocorosie”
“3” “devendra banhart”
“3” “four tet”
“3” “goldfrapp”
“3” “joanna newsom”
“3” “m83”
“3” “massive attack”
“3” “max richter”
“3” “mf doom”
“3” “neutral milk hotel”
“3” “pavement”
“3” “plaid”
“3” “portishead”
“3” “prefuse 73”
“3” “radiohead”
“3” “sage francis”
“3” “the books”
“3” “the flashbulb”
“4” “a tribe called quest”
“4” “air”
“4” “battles”
“4” “beck”
“4” “bon iver”
“4” “bonobo”
“4” “dj shadow”
“4” “fleetwood mac”
“4” “flight of the conchords”
“4” “kyuss”
“4” “late of the pier”
“4” “led zeppelin”
“4” “mgmt”
“4” “michael jackson”
“4” “muse”
“4” “pink floyd”
“4” “rjd2”
“4” “röyksopp”
“4” “simian mobile disco”
“4” “snow patrol”
“4” “the cinematic orchestra”
“4” “the decemberists”
“4” “the flaming lips”
“4” “the prodigy”
“4” “the rolling stones”
“4” “tool”
“4” “tv on the radio”
“5” “ac/dc”
“5” “bob marley &amp; the wailers”
“5” “children of bodom”
“5” “dream theater”
“5” “iron maiden”
“5” “megadeth”
“5” “metallica”
“5” “nightwish”
“5” “sublime”
“5” “trivium”
“5” “volbeat”
“6” “depeche mode”
“6” “dream theater”
“6” “faith no more”
“6” “green day”
“6” “iron maiden”
“6” “jay-z”
“6” “justin timberlake”
“6” “kanye west”
“6” “lily allen”
“6” “manu chao”
“6” “metallica”
“6” “muse”
“6” “pearl jam”
“6” “pink floyd”
“6” “queen”
“6” “sigur rós”
“6” “snow patrol”
“6” “stevie wonder”
“6” “tenacious d”
“6” “the streets”
“6” “thievery corporation”
“6” “type o negative”
“6” “u2”
“7” “ac/dc”
“7” “aerosmith”
“7” “alice in chains”
“7” “audioslave”
“7” “buckethead”
“7” “camel”
“7” “disturbed”
“7” “dream theater”
“7” “jethro tull”
“7” “king crimson”
“7” “led zeppelin”
“7” “oasis”
“7” “pearl jam”
“7” “pink floyd”
“7” “porcupine tree”
“7” “rammstein”
“7” “rush”
“7” “soundgarden”
“7” “stone temple pilots”
“7” “the verve”
“7” “tool”
“7” “type o negative”</p>
<p>Es una lista de transacciones - clase de datos definida en arules. Calculamos la frecuencia relativa de las canciones escuchadas:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="reglas-de-asociación.html#cb58-1" aria-hidden="true" tabindex="-1"></a>itfreq1  <span class="ot">&lt;-</span><span class="fu">itemFrequency</span>(lista.musica.por.usuario1)</span>
<span id="cb58-2"><a href="reglas-de-asociación.html#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(itfreq1)</span></code></pre></div>
<p>…and you will know us by the trail of dead
0.009800000
[unknown]
0.036866667
2pac
0.022733333
3 doors down
0.030933333
30 seconds to mars
0.032800000
311
0.008333333</p>
<p><em>itfreq1</em>:</p>
<ul>
<li>es una vector numérico</li>
<li>los nombres de la lista (names(itfreq), los nombres de cada grupo )</li>
<li>cada posición por tanto es la frecuencia del grupo de esa posición</li>
</ul>
<p>Dibujar las frecuencias usando la lista de transacciones obtenida:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="reglas-de-asociación.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">itemFrequencyPlot</span>(lista.musica.por.usuario1,<span class="at">support=</span>.<span class="dv">08</span>,<span class="at">cex.names=</span><span class="dv">1</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/itemFrequencyPlot-1.png" width="672" /></p>
<p>Y obtenemos las reglas de asociación con soporte 0.1 y confianza 0.5:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="reglas-de-asociación.html#cb60-1" aria-hidden="true" tabindex="-1"></a>reglas2 <span class="ot">&lt;-</span> <span class="fu">apriori</span>(lista.musica.por.usuario1,<span class="at">parameter=</span></span>
<span id="cb60-2"><a href="reglas-de-asociación.html#cb60-2" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">list</span>(<span class="at">support=</span>.<span class="dv">01</span>, <span class="at">confidence=</span>.<span class="dv">5</span>))</span></code></pre></div>
<p>Apriori</p>
<p>Parameter specification:
confidence minval smax arem aval originalSupport maxtime support minlen
0.5 0.1 1 none FALSE TRUE 5 0.01 1
maxlen target ext
10 rules TRUE</p>
<p>Algorithmic control:
filter tree heap memopt load sort verbose
0.1 TRUE TRUE FALSE TRUE 2 TRUE</p>
<p>Absolute minimum support count: 150</p>
<p>set item appearances …[0 item(s)] done [0.00s].
set transactions …[1004 item(s), 15000 transaction(s)] done [0.04s].
sorting and recoding items … [655 item(s)] done [0.00s].
creating transaction tree … done [0.00s].
checking subsets of size 1 2 3 4 done [0.01s].
writing … [50 rule(s)] done [0.00s].
creating S4 object … done [0.00s].</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="reglas-de-asociación.html#cb61-1" aria-hidden="true" tabindex="-1"></a>reglas2</span></code></pre></div>
<p>set of 50 rules</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="reglas-de-asociación.html#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(reglas2)</span></code></pre></div>
<pre><code> lhs                                     rhs            support   </code></pre>
<p>[1] {t.i.} =&gt; {kanye west} 0.01040000
[2] {the pussycat dolls} =&gt; {rihanna} 0.01040000
[3] {the fray} =&gt; {coldplay} 0.01126667
[4] {sonata arctica} =&gt; {nightwish} 0.01346667
[5] {judas priest} =&gt; {iron maiden} 0.01353333
[6] {the kinks} =&gt; {the beatles} 0.01360000
[7] {travis} =&gt; {coldplay} 0.01373333
[8] {the flaming lips} =&gt; {radiohead} 0.01306667
[9] {megadeth} =&gt; {metallica} 0.01626667
[10] {simon &amp; garfunkel} =&gt; {the beatles} 0.01540000
[11] {broken social scene} =&gt; {radiohead} 0.01506667
[12] {blur} =&gt; {radiohead} 0.01753333
[13] {keane} =&gt; {coldplay} 0.02226667
[14] {snow patrol} =&gt; {coldplay} 0.02646667
[15] {beck} =&gt; {radiohead} 0.02926667
[16] {snow patrol, the killers} =&gt; {coldplay} 0.01040000
[17] {radiohead, snow patrol} =&gt; {coldplay} 0.01006667
[18] {death cab for cutie, the shins} =&gt; {radiohead} 0.01006667
[19] {the beatles, the shins} =&gt; {radiohead} 0.01066667
[20] {led zeppelin, the doors} =&gt; {pink floyd} 0.01066667
[21] {pink floyd, the doors} =&gt; {led zeppelin} 0.01066667
[22] {pink floyd, the doors} =&gt; {the beatles} 0.01000000
[23] {the beatles, the strokes} =&gt; {radiohead} 0.01046667
[24] {oasis, the killers} =&gt; {coldplay} 0.01113333
[25] {oasis, the beatles} =&gt; {coldplay} 0.01060000
[26] {oasis, radiohead} =&gt; {coldplay} 0.01273333
[27] {beck, the beatles} =&gt; {radiohead} 0.01300000
[28] {bob dylan, the rolling stones} =&gt; {the beatles} 0.01146667
[29] {david bowie, the rolling stones} =&gt; {the beatles} 0.01000000
[30] {led zeppelin, the rolling stones} =&gt; {the beatles} 0.01066667
[31] {radiohead, the rolling stones} =&gt; {the beatles} 0.01060000
[32] {coldplay, the smashing pumpkins} =&gt; {radiohead} 0.01093333
[33] {the beatles, the smashing pumpkins} =&gt; {radiohead} 0.01146667
[34] {radiohead, u2} =&gt; {coldplay} 0.01140000
[35] {coldplay, sigur rós} =&gt; {radiohead} 0.01206667
[36] {sigur rós, the beatles} =&gt; {radiohead} 0.01046667
[37] {bob dylan, pink floyd} =&gt; {the beatles} 0.01033333
[38] {bob dylan, radiohead} =&gt; {the beatles} 0.01386667
[39] {bloc party, the killers} =&gt; {coldplay} 0.01106667
[40] {david bowie, pink floyd} =&gt; {the beatles} 0.01006667
[41] {david bowie, radiohead} =&gt; {the beatles} 0.01393333
[42] {placebo, radiohead} =&gt; {muse} 0.01366667
[43] {led zeppelin, radiohead} =&gt; {the beatles} 0.01306667
[44] {death cab for cutie, the killers} =&gt; {coldplay} 0.01086667
[45] {death cab for cutie, the beatles} =&gt; {radiohead} 0.01246667
[46] {muse, the killers} =&gt; {coldplay} 0.01513333
[47] {red hot chili peppers, the killers} =&gt; {coldplay} 0.01086667
[48] {the beatles, the killers} =&gt; {coldplay} 0.01253333
[49] {radiohead, the killers} =&gt; {coldplay} 0.01506667
[50] {muse, the beatles} =&gt; {radiohead} 0.01380000
confidence coverage lift count
[1] 0.5672727 0.01833333 8.854413 156<br />
[2] 0.5777778 0.01800000 13.415893 156<br />
[3] 0.5168196 0.02180000 3.260006 169<br />
[4] 0.5101010 0.02640000 8.236292 202<br />
[5] 0.5075000 0.02666667 8.562992 203<br />
[6] 0.5298701 0.02566667 2.979030 204<br />
[7] 0.5628415 0.02440000 3.550304 206<br />
[8] 0.5297297 0.02466667 2.938589 196<br />
[9] 0.5281385 0.03080000 4.743759 244<br />
[10] 0.5238095 0.02940000 2.944956 231<br />
[11] 0.5472155 0.02753333 3.035589 226<br />
[12] 0.5228628 0.03353333 2.900496 263<br />
[13] 0.6374046 0.03493333 4.020634 334<br />
[14] 0.5251323 0.05040000 3.312441 397<br />
[15] 0.5092807 0.05746667 2.825152 439<br />
[16] 0.5954198 0.01746667 3.755802 156<br />
[17] 0.6344538 0.01586667 4.002021 151<br />
[18] 0.5033333 0.02000000 2.792160 151<br />
[19] 0.5673759 0.01880000 3.147425 160<br />
[20] 0.5970149 0.01786667 5.689469 160<br />
[21] 0.5387205 0.01980000 6.802027 160<br />
[22] 0.5050505 0.01980000 2.839489 150<br />
[23] 0.5607143 0.01866667 3.110471 157<br />
[24] 0.6626984 0.01680000 4.180183 167<br />
[25] 0.5196078 0.02040000 3.277594 159<br />
[26] 0.5876923 0.02166667 3.707058 191<br />
[27] 0.5909091 0.02200000 3.277972 195<br />
[28] 0.5910653 0.01940000 3.323081 172<br />
[29] 0.5703422 0.01753333 3.206572 150<br />
[30] 0.5776173 0.01846667 3.247474 160<br />
[31] 0.5638298 0.01880000 3.169958 159<br />
[32] 0.6283525 0.01740000 3.485683 164<br />
[33] 0.6209386 0.01846667 3.444556 172<br />
[34] 0.5213415 0.02186667 3.288529 171<br />
[35] 0.5801282 0.02080000 3.218167 181<br />
[36] 0.6434426 0.01626667 3.569393 157<br />
[37] 0.6150794 0.01680000 3.458092 155<br />
[38] 0.5730028 0.02420000 3.221530 208<br />
[39] 0.5236593 0.02113333 3.303150 166<br />
[40] 0.5741445 0.01753333 3.227949 151<br />
[41] 0.5225000 0.02666667 2.937594 209<br />
[42] 0.5137845 0.02660000 4.504247 205<br />
[43] 0.5283019 0.02473333 2.970213 196<br />
[44] 0.5884477 0.01846667 3.711823 163<br />
[45] 0.5013405 0.02486667 2.781105 187<br />
[46] 0.5089686 0.02973333 3.210483 227<br />
[47] 0.5093750 0.02133333 3.213047 163<br />
[48] 0.5340909 0.02346667 3.368950 188<br />
[49] 0.5243619 0.02873333 3.307582 226<br />
[50] 0.5073529 0.02720000 2.814458 207</p>
<p>Primero nos quedamos con las reglas más interesantes. Filtramos aquellas con lift mayor que 1:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="reglas-de-asociación.html#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">subset</span>(reglas2, <span class="at">subset=</span>lift <span class="sc">&gt;</span> <span class="dv">1</span>))</span></code></pre></div>
<pre><code> lhs                                     rhs            support   </code></pre>
<p>[1] {t.i.} =&gt; {kanye west} 0.01040000
[2] {the pussycat dolls} =&gt; {rihanna} 0.01040000
[3] {the fray} =&gt; {coldplay} 0.01126667
[4] {sonata arctica} =&gt; {nightwish} 0.01346667
[5] {judas priest} =&gt; {iron maiden} 0.01353333
[6] {the kinks} =&gt; {the beatles} 0.01360000
[7] {travis} =&gt; {coldplay} 0.01373333
[8] {the flaming lips} =&gt; {radiohead} 0.01306667
[9] {megadeth} =&gt; {metallica} 0.01626667
[10] {simon &amp; garfunkel} =&gt; {the beatles} 0.01540000
[11] {broken social scene} =&gt; {radiohead} 0.01506667
[12] {blur} =&gt; {radiohead} 0.01753333
[13] {keane} =&gt; {coldplay} 0.02226667
[14] {snow patrol} =&gt; {coldplay} 0.02646667
[15] {beck} =&gt; {radiohead} 0.02926667
[16] {snow patrol, the killers} =&gt; {coldplay} 0.01040000
[17] {radiohead, snow patrol} =&gt; {coldplay} 0.01006667
[18] {death cab for cutie, the shins} =&gt; {radiohead} 0.01006667
[19] {the beatles, the shins} =&gt; {radiohead} 0.01066667
[20] {led zeppelin, the doors} =&gt; {pink floyd} 0.01066667
[21] {pink floyd, the doors} =&gt; {led zeppelin} 0.01066667
[22] {pink floyd, the doors} =&gt; {the beatles} 0.01000000
[23] {the beatles, the strokes} =&gt; {radiohead} 0.01046667
[24] {oasis, the killers} =&gt; {coldplay} 0.01113333
[25] {oasis, the beatles} =&gt; {coldplay} 0.01060000
[26] {oasis, radiohead} =&gt; {coldplay} 0.01273333
[27] {beck, the beatles} =&gt; {radiohead} 0.01300000
[28] {bob dylan, the rolling stones} =&gt; {the beatles} 0.01146667
[29] {david bowie, the rolling stones} =&gt; {the beatles} 0.01000000
[30] {led zeppelin, the rolling stones} =&gt; {the beatles} 0.01066667
[31] {radiohead, the rolling stones} =&gt; {the beatles} 0.01060000
[32] {coldplay, the smashing pumpkins} =&gt; {radiohead} 0.01093333
[33] {the beatles, the smashing pumpkins} =&gt; {radiohead} 0.01146667
[34] {radiohead, u2} =&gt; {coldplay} 0.01140000
[35] {coldplay, sigur rós} =&gt; {radiohead} 0.01206667
[36] {sigur rós, the beatles} =&gt; {radiohead} 0.01046667
[37] {bob dylan, pink floyd} =&gt; {the beatles} 0.01033333
[38] {bob dylan, radiohead} =&gt; {the beatles} 0.01386667
[39] {bloc party, the killers} =&gt; {coldplay} 0.01106667
[40] {david bowie, pink floyd} =&gt; {the beatles} 0.01006667
[41] {david bowie, radiohead} =&gt; {the beatles} 0.01393333
[42] {placebo, radiohead} =&gt; {muse} 0.01366667
[43] {led zeppelin, radiohead} =&gt; {the beatles} 0.01306667
[44] {death cab for cutie, the killers} =&gt; {coldplay} 0.01086667
[45] {death cab for cutie, the beatles} =&gt; {radiohead} 0.01246667
[46] {muse, the killers} =&gt; {coldplay} 0.01513333
[47] {red hot chili peppers, the killers} =&gt; {coldplay} 0.01086667
[48] {the beatles, the killers} =&gt; {coldplay} 0.01253333
[49] {radiohead, the killers} =&gt; {coldplay} 0.01506667
[50] {muse, the beatles} =&gt; {radiohead} 0.01380000
confidence coverage lift count
[1] 0.5672727 0.01833333 8.854413 156<br />
[2] 0.5777778 0.01800000 13.415893 156<br />
[3] 0.5168196 0.02180000 3.260006 169<br />
[4] 0.5101010 0.02640000 8.236292 202<br />
[5] 0.5075000 0.02666667 8.562992 203<br />
[6] 0.5298701 0.02566667 2.979030 204<br />
[7] 0.5628415 0.02440000 3.550304 206<br />
[8] 0.5297297 0.02466667 2.938589 196<br />
[9] 0.5281385 0.03080000 4.743759 244<br />
[10] 0.5238095 0.02940000 2.944956 231<br />
[11] 0.5472155 0.02753333 3.035589 226<br />
[12] 0.5228628 0.03353333 2.900496 263<br />
[13] 0.6374046 0.03493333 4.020634 334<br />
[14] 0.5251323 0.05040000 3.312441 397<br />
[15] 0.5092807 0.05746667 2.825152 439<br />
[16] 0.5954198 0.01746667 3.755802 156<br />
[17] 0.6344538 0.01586667 4.002021 151<br />
[18] 0.5033333 0.02000000 2.792160 151<br />
[19] 0.5673759 0.01880000 3.147425 160<br />
[20] 0.5970149 0.01786667 5.689469 160<br />
[21] 0.5387205 0.01980000 6.802027 160<br />
[22] 0.5050505 0.01980000 2.839489 150<br />
[23] 0.5607143 0.01866667 3.110471 157<br />
[24] 0.6626984 0.01680000 4.180183 167<br />
[25] 0.5196078 0.02040000 3.277594 159<br />
[26] 0.5876923 0.02166667 3.707058 191<br />
[27] 0.5909091 0.02200000 3.277972 195<br />
[28] 0.5910653 0.01940000 3.323081 172<br />
[29] 0.5703422 0.01753333 3.206572 150<br />
[30] 0.5776173 0.01846667 3.247474 160<br />
[31] 0.5638298 0.01880000 3.169958 159<br />
[32] 0.6283525 0.01740000 3.485683 164<br />
[33] 0.6209386 0.01846667 3.444556 172<br />
[34] 0.5213415 0.02186667 3.288529 171<br />
[35] 0.5801282 0.02080000 3.218167 181<br />
[36] 0.6434426 0.01626667 3.569393 157<br />
[37] 0.6150794 0.01680000 3.458092 155<br />
[38] 0.5730028 0.02420000 3.221530 208<br />
[39] 0.5236593 0.02113333 3.303150 166<br />
[40] 0.5741445 0.01753333 3.227949 151<br />
[41] 0.5225000 0.02666667 2.937594 209<br />
[42] 0.5137845 0.02660000 4.504247 205<br />
[43] 0.5283019 0.02473333 2.970213 196<br />
[44] 0.5884477 0.01846667 3.711823 163<br />
[45] 0.5013405 0.02486667 2.781105 187<br />
[46] 0.5089686 0.02973333 3.210483 227<br />
[47] 0.5093750 0.02133333 3.213047 163<br />
[48] 0.5340909 0.02346667 3.368950 188<br />
[49] 0.5243619 0.02873333 3.307582 226<br />
[50] 0.5073529 0.02720000 2.814458 207</p>
<p>Ordenamos por confianza estas reglas anteriores:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="reglas-de-asociación.html#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">sort</span>(<span class="fu">subset</span>(reglas2, <span class="at">subset=</span>lift <span class="sc">&gt;</span> <span class="dv">1</span>), <span class="at">by=</span><span class="st">&quot;confidence&quot;</span>))</span></code></pre></div>
<pre><code> lhs                                     rhs            support   </code></pre>
<p>[1] {oasis, the killers} =&gt; {coldplay} 0.01113333
[2] {sigur rós, the beatles} =&gt; {radiohead} 0.01046667
[3] {keane} =&gt; {coldplay} 0.02226667
[4] {radiohead, snow patrol} =&gt; {coldplay} 0.01006667
[5] {coldplay, the smashing pumpkins} =&gt; {radiohead} 0.01093333
[6] {the beatles, the smashing pumpkins} =&gt; {radiohead} 0.01146667
[7] {bob dylan, pink floyd} =&gt; {the beatles} 0.01033333
[8] {led zeppelin, the doors} =&gt; {pink floyd} 0.01066667
[9] {snow patrol, the killers} =&gt; {coldplay} 0.01040000
[10] {bob dylan, the rolling stones} =&gt; {the beatles} 0.01146667
[11] {beck, the beatles} =&gt; {radiohead} 0.01300000
[12] {death cab for cutie, the killers} =&gt; {coldplay} 0.01086667
[13] {oasis, radiohead} =&gt; {coldplay} 0.01273333
[14] {coldplay, sigur rós} =&gt; {radiohead} 0.01206667
[15] {the pussycat dolls} =&gt; {rihanna} 0.01040000
[16] {led zeppelin, the rolling stones} =&gt; {the beatles} 0.01066667
[17] {david bowie, pink floyd} =&gt; {the beatles} 0.01006667
[18] {bob dylan, radiohead} =&gt; {the beatles} 0.01386667
[19] {david bowie, the rolling stones} =&gt; {the beatles} 0.01000000
[20] {the beatles, the shins} =&gt; {radiohead} 0.01066667
[21] {t.i.} =&gt; {kanye west} 0.01040000
[22] {radiohead, the rolling stones} =&gt; {the beatles} 0.01060000
[23] {travis} =&gt; {coldplay} 0.01373333
[24] {the beatles, the strokes} =&gt; {radiohead} 0.01046667
[25] {broken social scene} =&gt; {radiohead} 0.01506667
[26] {pink floyd, the doors} =&gt; {led zeppelin} 0.01066667
[27] {the beatles, the killers} =&gt; {coldplay} 0.01253333
[28] {the kinks} =&gt; {the beatles} 0.01360000
[29] {the flaming lips} =&gt; {radiohead} 0.01306667
[30] {led zeppelin, radiohead} =&gt; {the beatles} 0.01306667
[31] {megadeth} =&gt; {metallica} 0.01626667
[32] {snow patrol} =&gt; {coldplay} 0.02646667
[33] {radiohead, the killers} =&gt; {coldplay} 0.01506667
[34] {simon &amp; garfunkel} =&gt; {the beatles} 0.01540000
[35] {bloc party, the killers} =&gt; {coldplay} 0.01106667
[36] {blur} =&gt; {radiohead} 0.01753333
[37] {david bowie, radiohead} =&gt; {the beatles} 0.01393333
[38] {radiohead, u2} =&gt; {coldplay} 0.01140000
[39] {oasis, the beatles} =&gt; {coldplay} 0.01060000
[40] {the fray} =&gt; {coldplay} 0.01126667
[41] {placebo, radiohead} =&gt; {muse} 0.01366667
[42] {sonata arctica} =&gt; {nightwish} 0.01346667
[43] {red hot chili peppers, the killers} =&gt; {coldplay} 0.01086667
[44] {beck} =&gt; {radiohead} 0.02926667
[45] {muse, the killers} =&gt; {coldplay} 0.01513333
[46] {judas priest} =&gt; {iron maiden} 0.01353333
[47] {muse, the beatles} =&gt; {radiohead} 0.01380000
[48] {pink floyd, the doors} =&gt; {the beatles} 0.01000000
[49] {death cab for cutie, the shins} =&gt; {radiohead} 0.01006667
[50] {death cab for cutie, the beatles} =&gt; {radiohead} 0.01246667
confidence coverage lift count
[1] 0.6626984 0.01680000 4.180183 167<br />
[2] 0.6434426 0.01626667 3.569393 157<br />
[3] 0.6374046 0.03493333 4.020634 334<br />
[4] 0.6344538 0.01586667 4.002021 151<br />
[5] 0.6283525 0.01740000 3.485683 164<br />
[6] 0.6209386 0.01846667 3.444556 172<br />
[7] 0.6150794 0.01680000 3.458092 155<br />
[8] 0.5970149 0.01786667 5.689469 160<br />
[9] 0.5954198 0.01746667 3.755802 156<br />
[10] 0.5910653 0.01940000 3.323081 172<br />
[11] 0.5909091 0.02200000 3.277972 195<br />
[12] 0.5884477 0.01846667 3.711823 163<br />
[13] 0.5876923 0.02166667 3.707058 191<br />
[14] 0.5801282 0.02080000 3.218167 181<br />
[15] 0.5777778 0.01800000 13.415893 156<br />
[16] 0.5776173 0.01846667 3.247474 160<br />
[17] 0.5741445 0.01753333 3.227949 151<br />
[18] 0.5730028 0.02420000 3.221530 208<br />
[19] 0.5703422 0.01753333 3.206572 150<br />
[20] 0.5673759 0.01880000 3.147425 160<br />
[21] 0.5672727 0.01833333 8.854413 156<br />
[22] 0.5638298 0.01880000 3.169958 159<br />
[23] 0.5628415 0.02440000 3.550304 206<br />
[24] 0.5607143 0.01866667 3.110471 157<br />
[25] 0.5472155 0.02753333 3.035589 226<br />
[26] 0.5387205 0.01980000 6.802027 160<br />
[27] 0.5340909 0.02346667 3.368950 188<br />
[28] 0.5298701 0.02566667 2.979030 204<br />
[29] 0.5297297 0.02466667 2.938589 196<br />
[30] 0.5283019 0.02473333 2.970213 196<br />
[31] 0.5281385 0.03080000 4.743759 244<br />
[32] 0.5251323 0.05040000 3.312441 397<br />
[33] 0.5243619 0.02873333 3.307582 226<br />
[34] 0.5238095 0.02940000 2.944956 231<br />
[35] 0.5236593 0.02113333 3.303150 166<br />
[36] 0.5228628 0.03353333 2.900496 263<br />
[37] 0.5225000 0.02666667 2.937594 209<br />
[38] 0.5213415 0.02186667 3.288529 171<br />
[39] 0.5196078 0.02040000 3.277594 159<br />
[40] 0.5168196 0.02180000 3.260006 169<br />
[41] 0.5137845 0.02660000 4.504247 205<br />
[42] 0.5101010 0.02640000 8.236292 202<br />
[43] 0.5093750 0.02133333 3.213047 163<br />
[44] 0.5092807 0.05746667 2.825152 439<br />
[45] 0.5089686 0.02973333 3.210483 227<br />
[46] 0.5075000 0.02666667 8.562992 203<br />
[47] 0.5073529 0.02720000 2.814458 207<br />
[48] 0.5050505 0.01980000 2.839489 150<br />
[49] 0.5033333 0.02000000 2.792160 151<br />
[50] 0.5013405 0.02486667 2.781105 187</p>
<p><strong>¿Recomendación a usuarios que escuchan Coldplay?</strong>:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="reglas-de-asociación.html#cb68-1" aria-hidden="true" tabindex="-1"></a>r1 <span class="ot">&lt;-</span><span class="fu">subset</span>(reglas2, <span class="at">subset =</span> lhs <span class="sc">%ain%</span> </span>
<span id="cb68-2"><a href="reglas-de-asociación.html#cb68-2" aria-hidden="true" tabindex="-1"></a>         <span class="fu">c</span>(<span class="st">&quot;coldplay&quot;</span>))</span>
<span id="cb68-3"><a href="reglas-de-asociación.html#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(r1)</span></code></pre></div>
<pre><code>lhs                                  rhs         support    confidence</code></pre>
<p>[1] {coldplay, the smashing pumpkins} =&gt; {radiohead} 0.01093333 0.6283525
[2] {coldplay, sigur rós} =&gt; {radiohead} 0.01206667 0.5801282
coverage lift count
[1] 0.0174 3.485683 164<br />
[2] 0.0208 3.218167 181</p>
<p>Probad con otros grupos.</p>
<!-- # Afinidad -->
<!-- Se define la afinidad entre dos items  (Agrawal 2002) como   -->
<!-- $$A(i,j)=\frac{sup({i,j}))}{sup({i})+sup({j})-sup({i,j})}$$ -->
<!-- o lo que es lo mismo: -->
<!-- $$A(i,j)=\frac{\mid A \cap B}{\mid A \cup B\mid }$$ -->
<!-- ```{r} -->
<!-- inspect(head(lista.musica.por.usuario1)) -->
<!-- afi <- affinity(head(lista.musica.por.usuario1)) -->
<!-- View(afi) -->
<!-- image(afi) -->
<!-- ``` -->
<!-- Por un lado se  muestra la matriz de afinidad.  -->
<!-- La imagen  muestra la afinidad que tiene cada ítem con cada ítem del dataset de transacciones, cuanto mas se acerca al blanco mas afinidad existe entre ambos ítems. -->

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="clustering.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="formal-concept-analysis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/07-reglasAsociacion.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
